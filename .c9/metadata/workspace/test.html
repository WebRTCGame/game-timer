{"filter":false,"title":"test.html","tooltip":"/test.html","undoManager":{"mark":2,"position":2,"stack":[[{"start":{"row":0,"column":0},"end":{"row":2,"column":34345},"action":"insert","lines":["","<!-- saved from url=(0098)http://zufallsgenerator.github.io/assets/code/2014-01-26/spatialhash/examples/insert_retrieve.html -->","<html><head><meta http-equiv=\"Content-Type\" content=\"text/html; charset=ISO-8859-1\"></head><body><div class=\"webkit-line-gutter-backdrop\"></div><table><tbody><tr><td class=\"webkit-line-number\" value=\"1\"></td><td class=\"webkit-line-content\"><span class=\"webkit-html-doctype\">&lt;!doctype html&gt;</span></td></tr><tr><td class=\"webkit-line-number\" value=\"2\"></td><td class=\"webkit-line-content\"><span class=\"webkit-html-tag\">&lt;html&gt;</span></td></tr><tr><td class=\"webkit-line-number\" value=\"3\"></td><td class=\"webkit-line-content\">\t<span class=\"webkit-html-tag\">&lt;head&gt;</span></td></tr><tr><td class=\"webkit-line-number\" value=\"4\"></td><td class=\"webkit-line-content\">\t\t<span class=\"webkit-html-tag\">&lt;title&gt;</span>Quadtree Test<span class=\"webkit-html-tag\">&lt;/title&gt;</span></td></tr><tr><td class=\"webkit-line-number\" value=\"5\"></td><td class=\"webkit-line-content\">\t\t<span class=\"webkit-html-tag\">&lt;style <span class=\"webkit-html-attribute-name\">type</span>=\"<span class=\"webkit-html-attribute-value\">text/css</span>\"&gt;</span></td></tr><tr><td class=\"webkit-line-number\" value=\"6\"></td><td class=\"webkit-line-content\">\t\t\t* {</td></tr><tr><td class=\"webkit-line-number\" value=\"7\"></td><td class=\"webkit-line-content\">\t\t\t\tmargin: 0;</td></tr><tr><td class=\"webkit-line-number\" value=\"8\"></td><td class=\"webkit-line-content\">\t\t\t\tpadding: 0;</td></tr><tr><td class=\"webkit-line-number\" value=\"9\"></td><td class=\"webkit-line-content\">\t\t\t}</td></tr><tr><td class=\"webkit-line-number\" value=\"10\"></td><td class=\"webkit-line-content\">\t\t\tbody {</td></tr><tr><td class=\"webkit-line-number\" value=\"11\"></td><td class=\"webkit-line-content\">\t\t\t\tfont-family: Arial, Helvetica, sans-serif;</td></tr><tr><td class=\"webkit-line-number\" value=\"12\"></td><td class=\"webkit-line-content\">\t\t\t\tfont-size: 12px;</td></tr><tr><td class=\"webkit-line-number\" value=\"13\"></td><td class=\"webkit-line-content\">\t\t\t\tpadding: 40px;</td></tr><tr><td class=\"webkit-line-number\" value=\"14\"></td><td class=\"webkit-line-content\">\t\t\t\tbackground: #fff;</td></tr><tr><td class=\"webkit-line-number\" value=\"15\"></td><td class=\"webkit-line-content\">\t\t\t}</td></tr><tr><td class=\"webkit-line-number\" value=\"16\"></td><td class=\"webkit-line-content\">\t\t\t#canvasContainer {</td></tr><tr><td class=\"webkit-line-number\" value=\"17\"></td><td class=\"webkit-line-content\">\t\t\t\tbackground: #111;</td></tr><tr><td class=\"webkit-line-number\" value=\"18\"></td><td class=\"webkit-line-content\">\t\t\t}</td></tr><tr><td class=\"webkit-line-number\" value=\"19\"></td><td class=\"webkit-line-content\">\t\t\t#canvasContainer canvas {</td></tr><tr><td class=\"webkit-line-number\" value=\"20\"></td><td class=\"webkit-line-content\">\t\t\t\tdisplay: block;</td></tr><tr><td class=\"webkit-line-number\" value=\"21\"></td><td class=\"webkit-line-content\">\t\t\t\tmargin: 0 auto;</td></tr><tr><td class=\"webkit-line-number\" value=\"22\"></td><td class=\"webkit-line-content\">\t\t\t\tbackground: #000;</td></tr><tr><td class=\"webkit-line-number\" value=\"23\"></td><td class=\"webkit-line-content\">\t\t\t}</td></tr><tr><td class=\"webkit-line-number\" value=\"24\"></td><td class=\"webkit-line-content\">\t\t<span class=\"webkit-html-tag\">&lt;/style&gt;</span></td></tr><tr><td class=\"webkit-line-number\" value=\"25\"></td><td class=\"webkit-line-content\">\t<span class=\"webkit-html-tag\">&lt;/head&gt;</span></td></tr><tr><td class=\"webkit-line-number\" value=\"26\"></td><td class=\"webkit-line-content\">\t<span class=\"webkit-html-tag\">&lt;body&gt;</span></td></tr><tr><td class=\"webkit-line-number\" value=\"27\"></td><td class=\"webkit-line-content\">    <span class=\"webkit-html-tag\">&lt;h1&gt;</span>Spatial Hashing<span class=\"webkit-html-tag\">&lt;/h1&gt;</span></td></tr><tr><td class=\"webkit-line-number\" value=\"28\"></td><td class=\"webkit-line-content\">    <span class=\"webkit-html-tag\">&lt;div <span class=\"webkit-html-attribute-name\">id</span>=\"<span class=\"webkit-html-attribute-value\">controllerContainer</span>\" <span class=\"webkit-html-attribute-name\">style</span>=\"<span class=\"webkit-html-attribute-value\">float: right;</span>\"&gt;</span></td></tr><tr><td class=\"webkit-line-number\" value=\"29\"></td><td class=\"webkit-line-content\">    <span class=\"webkit-html-tag\">&lt;/div&gt;</span></td></tr><tr><td class=\"webkit-line-number\" value=\"30\"></td><td class=\"webkit-line-content\">\t\t<span class=\"webkit-html-tag\">&lt;div <span class=\"webkit-html-attribute-name\">id</span>=\"<span class=\"webkit-html-attribute-value\">canvasContainer</span>\"&gt;</span></td></tr><tr><td class=\"webkit-line-number\" value=\"31\"></td><td class=\"webkit-line-content\">\t\t\t<span class=\"webkit-html-tag\">&lt;canvas <span class=\"webkit-html-attribute-name\">id</span>=\"<span class=\"webkit-html-attribute-value\">canvas</span>\" <span class=\"webkit-html-attribute-name\">width</span>=\"<span class=\"webkit-html-attribute-value\">400</span>\" <span class=\"webkit-html-attribute-name\">height</span>=\"<span class=\"webkit-html-attribute-value\">300</span>\"&gt;</span><span class=\"webkit-html-tag\">&lt;/canvas&gt;</span></td></tr><tr><td class=\"webkit-line-number\" value=\"32\"></td><td class=\"webkit-line-content\">\t\t<span class=\"webkit-html-tag\">&lt;/div&gt;</span></td></tr><tr><td class=\"webkit-line-number\" value=\"33\"></td><td class=\"webkit-line-content\">\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"34\"></td><td class=\"webkit-line-content\"><span class=\"webkit-html-comment\">&lt;!--\t\t&lt;script src=\"../quadtree.js\"&gt;&lt;/script&gt;--&gt;</span></td></tr><tr><td class=\"webkit-line-number\" value=\"35\"></td><td class=\"webkit-line-content\">\t\t<span class=\"webkit-html-tag\">&lt;script <span class=\"webkit-html-attribute-name\">src</span>=\"<a class=\"webkit-html-attribute-value webkit-html-resource-link\" target=\"_blank\" href=\"http://zufallsgenerator.github.io/assets/code/2014-01-26/spatialhash/spatialhash.js\">../spatialhash.js</a>\"&gt;</span><span class=\"webkit-html-tag\">&lt;/script&gt;</span></td></tr><tr><td class=\"webkit-line-number\" value=\"36\"></td><td class=\"webkit-line-content\">    <span class=\"webkit-html-tag\">&lt;script <span class=\"webkit-html-attribute-name\">type</span>=\"<span class=\"webkit-html-attribute-value\">text/javascript</span>\" <span class=\"webkit-html-attribute-name\">src</span>=\"<a class=\"webkit-html-attribute-value webkit-html-resource-link\" target=\"_blank\" href=\"http://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.5/dat.gui.min.js\">http://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.5/dat.gui.min.js</a>\"&gt;</span><span class=\"webkit-html-tag\">&lt;/script&gt;</span></td></tr><tr><td class=\"webkit-line-number\" value=\"37\"></td><td class=\"webkit-line-content\">\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"38\"></td><td class=\"webkit-line-content\">\t\t<span class=\"webkit-html-tag\">&lt;script&gt;</span>\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"39\"></td><td class=\"webkit-line-content\">\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"40\"></td><td class=\"webkit-line-content\">\t\t(function(w, M) {</td></tr><tr><td class=\"webkit-line-number\" value=\"41\"></td><td class=\"webkit-line-content\">      var config = {</td></tr><tr><td class=\"webkit-line-number\" value=\"42\"></td><td class=\"webkit-line-content\">        numberOfObjects: 200,</td></tr><tr><td class=\"webkit-line-number\" value=\"43\"></td><td class=\"webkit-line-content\">        sizePowerOfTwo: 4</td></tr><tr><td class=\"webkit-line-number\" value=\"44\"></td><td class=\"webkit-line-content\">      };</td></tr><tr><td class=\"webkit-line-number\" value=\"45\"></td><td class=\"webkit-line-content\">      var lastConfig = {};</td></tr><tr><td class=\"webkit-line-number\" value=\"46\"></td><td class=\"webkit-line-content\">      </td></tr><tr><td class=\"webkit-line-number\" value=\"47\"></td><td class=\"webkit-line-content\">      function saveLastConfig() {</td></tr><tr><td class=\"webkit-line-number\" value=\"48\"></td><td class=\"webkit-line-content\">        lastConfig.numberOfObjects = config.numberOfObjects;</td></tr><tr><td class=\"webkit-line-number\" value=\"49\"></td><td class=\"webkit-line-content\">        lastConfig.sizePowerOfTwo = config.sizePowerOfTwo;</td></tr><tr><td class=\"webkit-line-number\" value=\"50\"></td><td class=\"webkit-line-content\">      }</td></tr><tr><td class=\"webkit-line-number\" value=\"51\"></td><td class=\"webkit-line-content\">      </td></tr><tr><td class=\"webkit-line-number\" value=\"52\"></td><td class=\"webkit-line-content\">      </td></tr><tr><td class=\"webkit-line-number\" value=\"53\"></td><td class=\"webkit-line-content\">      </td></tr><tr><td class=\"webkit-line-number\" value=\"54\"></td><td class=\"webkit-line-content\">      var gui = new dat.GUI({autoPlace: false});</td></tr><tr><td class=\"webkit-line-number\" value=\"55\"></td><td class=\"webkit-line-content\">      var container = document.getElementById('controllerContainer');</td></tr><tr><td class=\"webkit-line-number\" value=\"56\"></td><td class=\"webkit-line-content\">      container.appendChild(gui.domElement);</td></tr><tr><td class=\"webkit-line-number\" value=\"57\"></td><td class=\"webkit-line-content\">      gui.add(config, \"numberOfObjects\", 1, 1000).step(1);</td></tr><tr><td class=\"webkit-line-number\" value=\"58\"></td><td class=\"webkit-line-content\">      gui.add(config, \"sizePowerOfTwo\", 1, 32).step(1);</td></tr><tr><td class=\"webkit-line-number\" value=\"59\"></td><td class=\"webkit-line-content\">      saveLastConfig();</td></tr><tr><td class=\"webkit-line-number\" value=\"60\"></td><td class=\"webkit-line-content\"><br></td></tr><tr><td class=\"webkit-line-number\" value=\"61\"></td><td class=\"webkit-line-content\">      \t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"62\"></td><td class=\"webkit-line-content\">\t\t\tw.requestAnimFrame = (function () {</td></tr><tr><td class=\"webkit-line-number\" value=\"63\"></td><td class=\"webkit-line-content\">\t\t\t\treturn  w.requestAnimationFrame ||</td></tr><tr><td class=\"webkit-line-number\" value=\"64\"></td><td class=\"webkit-line-content\">\t\t\t\t\tw.webkitRequestAnimationFrame ||</td></tr><tr><td class=\"webkit-line-number\" value=\"65\"></td><td class=\"webkit-line-content\">\t\t\t\t\tw.mozRequestAnimationFrame ||</td></tr><tr><td class=\"webkit-line-number\" value=\"66\"></td><td class=\"webkit-line-content\">\t\t\t\t\tw.oRequestAnimationFrame ||</td></tr><tr><td class=\"webkit-line-number\" value=\"67\"></td><td class=\"webkit-line-content\">\t\t\t\t\tw.msRequestAnimationFrame ||</td></tr><tr><td class=\"webkit-line-number\" value=\"68\"></td><td class=\"webkit-line-content\">\t\t\t\t\tfunction (callback) {</td></tr><tr><td class=\"webkit-line-number\" value=\"69\"></td><td class=\"webkit-line-content\">\t\t\t\t\t\tw.setTimeout(callback, 1000 / 60);</td></tr><tr><td class=\"webkit-line-number\" value=\"70\"></td><td class=\"webkit-line-content\">\t\t\t\t\t};</td></tr><tr><td class=\"webkit-line-number\" value=\"71\"></td><td class=\"webkit-line-content\">\t\t\t})();</td></tr><tr><td class=\"webkit-line-number\" value=\"72\"></td><td class=\"webkit-line-content\">\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"73\"></td><td class=\"webkit-line-content\">\t\t\tvar ctx = document.getElementById('canvas').getContext('2d');</td></tr><tr><td class=\"webkit-line-number\" value=\"74\"></td><td class=\"webkit-line-content\">\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"75\"></td><td class=\"webkit-line-content\">\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"76\"></td><td class=\"webkit-line-content\">\t\t\t/*</td></tr><tr><td class=\"webkit-line-number\" value=\"77\"></td><td class=\"webkit-line-content\">\t\t\t * the main Quadtree</td></tr><tr><td class=\"webkit-line-number\" value=\"78\"></td><td class=\"webkit-line-content\">\t\t\t */</td></tr><tr><td class=\"webkit-line-number\" value=\"79\"></td><td class=\"webkit-line-content\">       /*</td></tr><tr><td class=\"webkit-line-number\" value=\"80\"></td><td class=\"webkit-line-content\">\t\t\tvar myTree = new Quadtree({</td></tr><tr><td class=\"webkit-line-number\" value=\"81\"></td><td class=\"webkit-line-content\">\t\t\t\tx: 0,</td></tr><tr><td class=\"webkit-line-number\" value=\"82\"></td><td class=\"webkit-line-content\">\t\t\t\ty: 0,</td></tr><tr><td class=\"webkit-line-number\" value=\"83\"></td><td class=\"webkit-line-content\">\t\t\t\twidth: 400,</td></tr><tr><td class=\"webkit-line-number\" value=\"84\"></td><td class=\"webkit-line-content\">\t\t\t\theight: 300</td></tr><tr><td class=\"webkit-line-number\" value=\"85\"></td><td class=\"webkit-line-content\">\t\t\t});</td></tr><tr><td class=\"webkit-line-number\" value=\"86\"></td><td class=\"webkit-line-content\">      */</td></tr><tr><td class=\"webkit-line-number\" value=\"87\"></td><td class=\"webkit-line-content\">      var myTree;</td></tr><tr><td class=\"webkit-line-number\" value=\"88\"></td><td class=\"webkit-line-content\">      </td></tr><tr><td class=\"webkit-line-number\" value=\"89\"></td><td class=\"webkit-line-content\">      function initSpatialHash() {</td></tr><tr><td class=\"webkit-line-number\" value=\"90\"></td><td class=\"webkit-line-content\">        myTree = new SpatialHash(config.sizePowerOfTwo);</td></tr><tr><td class=\"webkit-line-number\" value=\"91\"></td><td class=\"webkit-line-content\">      }</td></tr><tr><td class=\"webkit-line-number\" value=\"92\"></td><td class=\"webkit-line-content\">      </td></tr><tr><td class=\"webkit-line-number\" value=\"93\"></td><td class=\"webkit-line-content\">      initSpatialHash();</td></tr><tr><td class=\"webkit-line-number\" value=\"94\"></td><td class=\"webkit-line-content\">\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"95\"></td><td class=\"webkit-line-content\">\t\t\t/*</td></tr><tr><td class=\"webkit-line-number\" value=\"96\"></td><td class=\"webkit-line-content\">\t\t\t * our objects will be stored here</td></tr><tr><td class=\"webkit-line-number\" value=\"97\"></td><td class=\"webkit-line-content\">\t\t\t */</td></tr><tr><td class=\"webkit-line-number\" value=\"98\"></td><td class=\"webkit-line-content\">\t\t\tvar myObjects = [];</td></tr><tr><td class=\"webkit-line-number\" value=\"99\"></td><td class=\"webkit-line-content\">\t\t\t\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"100\"></td><td class=\"webkit-line-content\">\t\t\t/*</td></tr><tr><td class=\"webkit-line-number\" value=\"101\"></td><td class=\"webkit-line-content\">\t\t\t * our \"hero\"</td></tr><tr><td class=\"webkit-line-number\" value=\"102\"></td><td class=\"webkit-line-content\">\t\t\t */</td></tr><tr><td class=\"webkit-line-number\" value=\"103\"></td><td class=\"webkit-line-content\">\t\t\tvar myHero = {</td></tr><tr><td class=\"webkit-line-number\" value=\"104\"></td><td class=\"webkit-line-content\">\t\t\t\tx : 0,</td></tr><tr><td class=\"webkit-line-number\" value=\"105\"></td><td class=\"webkit-line-content\">\t\t\t\ty : 0,</td></tr><tr><td class=\"webkit-line-number\" value=\"106\"></td><td class=\"webkit-line-content\">\t\t\t\twidth : 20,</td></tr><tr><td class=\"webkit-line-number\" value=\"107\"></td><td class=\"webkit-line-content\">\t\t\t\theight : 20</td></tr><tr><td class=\"webkit-line-number\" value=\"108\"></td><td class=\"webkit-line-content\">\t\t\t};</td></tr><tr><td class=\"webkit-line-number\" value=\"109\"></td><td class=\"webkit-line-content\">\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"110\"></td><td class=\"webkit-line-content\">\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"111\"></td><td class=\"webkit-line-content\">\t\t\t/*</td></tr><tr><td class=\"webkit-line-number\" value=\"112\"></td><td class=\"webkit-line-content\">\t\t\t * create some objects and save them in myObjects</td></tr><tr><td class=\"webkit-line-number\" value=\"113\"></td><td class=\"webkit-line-content\">\t\t\t */</td></tr><tr><td class=\"webkit-line-number\" value=\"114\"></td><td class=\"webkit-line-content\">\t\t\tvar createObjects = function() {</td></tr><tr><td class=\"webkit-line-number\" value=\"115\"></td><td class=\"webkit-line-content\">        myObjects.length = 0;</td></tr><tr><td class=\"webkit-line-number\" value=\"116\"></td><td class=\"webkit-line-content\">\t\t\t\tfor( var i=0;i&lt;config.numberOfObjects;i=i+1 ) {</td></tr><tr><td class=\"webkit-line-number\" value=\"117\"></td><td class=\"webkit-line-content\">          myObjects.push({</td></tr><tr><td class=\"webkit-line-number\" value=\"118\"></td><td class=\"webkit-line-content\">\t\t\t\t\t\tx : randMinMax(10, 390),</td></tr><tr><td class=\"webkit-line-number\" value=\"119\"></td><td class=\"webkit-line-content\">\t\t\t\t\t\ty : randMinMax(10, 290),</td></tr><tr><td class=\"webkit-line-number\" value=\"120\"></td><td class=\"webkit-line-content\">\t\t\t\t\t\twidth : randMinMax(10, 20),</td></tr><tr><td class=\"webkit-line-number\" value=\"121\"></td><td class=\"webkit-line-content\">\t\t\t\t\t\theight : randMinMax(10, 20),</td></tr><tr><td class=\"webkit-line-number\" value=\"122\"></td><td class=\"webkit-line-content\">\t\t\t\t\t\tvx: randMinMax(-1,1),</td></tr><tr><td class=\"webkit-line-number\" value=\"123\"></td><td class=\"webkit-line-content\">\t\t\t\t\t\tvy: randMinMax(-1,1),</td></tr><tr><td class=\"webkit-line-number\" value=\"124\"></td><td class=\"webkit-line-content\">\t\t\t\t\t\tcheck : false</td></tr><tr><td class=\"webkit-line-number\" value=\"125\"></td><td class=\"webkit-line-content\">\t\t\t\t\t});</td></tr><tr><td class=\"webkit-line-number\" value=\"126\"></td><td class=\"webkit-line-content\">\t\t\t\t}</td></tr><tr><td class=\"webkit-line-number\" value=\"127\"></td><td class=\"webkit-line-content\">\t\t\t};</td></tr><tr><td class=\"webkit-line-number\" value=\"128\"></td><td class=\"webkit-line-content\">\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"129\"></td><td class=\"webkit-line-content\">\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"130\"></td><td class=\"webkit-line-content\">\t\t\t/*</td></tr><tr><td class=\"webkit-line-number\" value=\"131\"></td><td class=\"webkit-line-content\">\t\t\t * draw Quadtree nodes</td></tr><tr><td class=\"webkit-line-number\" value=\"132\"></td><td class=\"webkit-line-content\">\t\t\t */</td></tr><tr><td class=\"webkit-line-number\" value=\"133\"></td><td class=\"webkit-line-content\">\t\t\tvar drawQuadtree = function( node ) {</td></tr><tr><td class=\"webkit-line-number\" value=\"134\"></td><td class=\"webkit-line-content\">\t\t\t\tvar \tbounds = node.bounds;</td></tr><tr><td class=\"webkit-line-number\" value=\"135\"></td><td class=\"webkit-line-content\">\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"136\"></td><td class=\"webkit-line-content\">\t\t\t\t//no subnodes? draw the current node</td></tr><tr><td class=\"webkit-line-number\" value=\"137\"></td><td class=\"webkit-line-content\">\t\t\t\tif( node.nodes.length === 0 ) {</td></tr><tr><td class=\"webkit-line-number\" value=\"138\"></td><td class=\"webkit-line-content\">\t\t\t\t\tctx.strokeStyle = 'rgba(255,0,0,0.2)';</td></tr><tr><td class=\"webkit-line-number\" value=\"139\"></td><td class=\"webkit-line-content\">\t\t\t\t\tctx.strokeRect(bounds.x, bounds.y, bounds.width, bounds.height);</td></tr><tr><td class=\"webkit-line-number\" value=\"140\"></td><td class=\"webkit-line-content\">\t\t\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"141\"></td><td class=\"webkit-line-content\">\t\t\t\t//has subnodes? drawQuadtree them!</td></tr><tr><td class=\"webkit-line-number\" value=\"142\"></td><td class=\"webkit-line-content\">\t\t\t\t} else {</td></tr><tr><td class=\"webkit-line-number\" value=\"143\"></td><td class=\"webkit-line-content\">\t\t\t\t\tfor( var i=0;i&lt;node.nodes.length;i=i+1 ) {</td></tr><tr><td class=\"webkit-line-number\" value=\"144\"></td><td class=\"webkit-line-content\">\t\t\t\t\t\tdrawQuadtree( node.nodes[ i ] );</td></tr><tr><td class=\"webkit-line-number\" value=\"145\"></td><td class=\"webkit-line-content\">\t\t\t\t\t}</td></tr><tr><td class=\"webkit-line-number\" value=\"146\"></td><td class=\"webkit-line-content\">\t\t\t\t}</td></tr><tr><td class=\"webkit-line-number\" value=\"147\"></td><td class=\"webkit-line-content\">\t\t\t};</td></tr><tr><td class=\"webkit-line-number\" value=\"148\"></td><td class=\"webkit-line-content\">\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"149\"></td><td class=\"webkit-line-content\">\t\t\t/*</td></tr><tr><td class=\"webkit-line-number\" value=\"150\"></td><td class=\"webkit-line-content\">\t\t\t * draw all objects in a given node </td></tr><tr><td class=\"webkit-line-number\" value=\"151\"></td><td class=\"webkit-line-content\">\t\t\t */</td></tr><tr><td class=\"webkit-line-number\" value=\"152\"></td><td class=\"webkit-line-content\">\t\t\tvar drawObjects = function( node ) {</td></tr><tr><td class=\"webkit-line-number\" value=\"153\"></td><td class=\"webkit-line-content\">\t\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"154\"></td><td class=\"webkit-line-content\">        /*</td></tr><tr><td class=\"webkit-line-number\" value=\"155\"></td><td class=\"webkit-line-content\">\t\t\t\tvar obj;</td></tr><tr><td class=\"webkit-line-number\" value=\"156\"></td><td class=\"webkit-line-content\">        */</td></tr><tr><td class=\"webkit-line-number\" value=\"157\"></td><td class=\"webkit-line-content\">\t\t\t\tvar obj, objects = node.retrieve(); // get all</td></tr><tr><td class=\"webkit-line-number\" value=\"158\"></td><td class=\"webkit-line-content\"><br></td></tr><tr><td class=\"webkit-line-number\" value=\"159\"></td><td class=\"webkit-line-content\">\t\t\t\tfor( var i=0;i&lt;objects.length;i=i+1 ) {</td></tr><tr><td class=\"webkit-line-number\" value=\"160\"></td><td class=\"webkit-line-content\">\t\t\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"161\"></td><td class=\"webkit-line-content\">\t\t\t\t\tobj = objects[ i ];</td></tr><tr><td class=\"webkit-line-number\" value=\"162\"></td><td class=\"webkit-line-content\">\t\t\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"163\"></td><td class=\"webkit-line-content\">\t\t\t\t\tif( obj.check ) {</td></tr><tr><td class=\"webkit-line-number\" value=\"164\"></td><td class=\"webkit-line-content\">\t\t\t\t\t\tctx.strokeStyle = 'rgba(255,255,255,0.9)';</td></tr><tr><td class=\"webkit-line-number\" value=\"165\"></td><td class=\"webkit-line-content\">\t\t\t\t\t} else {</td></tr><tr><td class=\"webkit-line-number\" value=\"166\"></td><td class=\"webkit-line-content\">\t\t\t\t\t\tctx.strokeStyle = 'rgba(255,255,255,0.2)';</td></tr><tr><td class=\"webkit-line-number\" value=\"167\"></td><td class=\"webkit-line-content\">\t\t\t\t\t}</td></tr><tr><td class=\"webkit-line-number\" value=\"168\"></td><td class=\"webkit-line-content\">\t\t\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"169\"></td><td class=\"webkit-line-content\">\t\t\t\t\tctx.strokeRect( obj.x, obj.y, obj.width, obj.height );</td></tr><tr><td class=\"webkit-line-number\" value=\"170\"></td><td class=\"webkit-line-content\">\t\t\t\t}</td></tr><tr><td class=\"webkit-line-number\" value=\"171\"></td><td class=\"webkit-line-content\"><br></td></tr><tr><td class=\"webkit-line-number\" value=\"172\"></td><td class=\"webkit-line-content\">\t\t\t};</td></tr><tr><td class=\"webkit-line-number\" value=\"173\"></td><td class=\"webkit-line-content\">\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"174\"></td><td class=\"webkit-line-content\">\t\t\t/*</td></tr><tr><td class=\"webkit-line-number\" value=\"175\"></td><td class=\"webkit-line-content\">\t\t\t * position hero at mouse position</td></tr><tr><td class=\"webkit-line-number\" value=\"176\"></td><td class=\"webkit-line-content\">\t\t\t */</td></tr><tr><td class=\"webkit-line-number\" value=\"177\"></td><td class=\"webkit-line-content\">\t\t\tvar handleMousemove = function(e) {</td></tr><tr><td class=\"webkit-line-number\" value=\"178\"></td><td class=\"webkit-line-content\">\t\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"179\"></td><td class=\"webkit-line-content\">\t\t\t\tvar \tmx, my;</td></tr><tr><td class=\"webkit-line-number\" value=\"180\"></td><td class=\"webkit-line-content\">\t\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"181\"></td><td class=\"webkit-line-content\">\t\t\t\tif(e.offsetX) {</td></tr><tr><td class=\"webkit-line-number\" value=\"182\"></td><td class=\"webkit-line-content\">\t\t\t\t\tmx = e.offsetX;</td></tr><tr><td class=\"webkit-line-number\" value=\"183\"></td><td class=\"webkit-line-content\">\t\t\t\t\tmy = e.offsetY;</td></tr><tr><td class=\"webkit-line-number\" value=\"184\"></td><td class=\"webkit-line-content\">\t\t\t\t} else if(e.layerX) {</td></tr><tr><td class=\"webkit-line-number\" value=\"185\"></td><td class=\"webkit-line-content\">\t\t\t\t\tmx = e.layerX;</td></tr><tr><td class=\"webkit-line-number\" value=\"186\"></td><td class=\"webkit-line-content\">\t\t\t\t\tmy = e.layerY;</td></tr><tr><td class=\"webkit-line-number\" value=\"187\"></td><td class=\"webkit-line-content\">\t\t\t\t}</td></tr><tr><td class=\"webkit-line-number\" value=\"188\"></td><td class=\"webkit-line-content\">\t\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"189\"></td><td class=\"webkit-line-content\">\t\t\t\tmyHero.x = mx;</td></tr><tr><td class=\"webkit-line-number\" value=\"190\"></td><td class=\"webkit-line-content\">\t\t\t\tmyHero.y = my;</td></tr><tr><td class=\"webkit-line-number\" value=\"191\"></td><td class=\"webkit-line-content\">\t\t\t};</td></tr><tr><td class=\"webkit-line-number\" value=\"192\"></td><td class=\"webkit-line-content\">\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"193\"></td><td class=\"webkit-line-content\">\t\t\t/*</td></tr><tr><td class=\"webkit-line-number\" value=\"194\"></td><td class=\"webkit-line-content\">\t\t\t * return a random number between min and max</td></tr><tr><td class=\"webkit-line-number\" value=\"195\"></td><td class=\"webkit-line-content\">\t\t\t */</td></tr><tr><td class=\"webkit-line-number\" value=\"196\"></td><td class=\"webkit-line-content\">\t\t\tvar randMinMax = function(min, max) {</td></tr><tr><td class=\"webkit-line-number\" value=\"197\"></td><td class=\"webkit-line-content\">\t\t\t\treturn min + (M.random() * (max - min));</td></tr><tr><td class=\"webkit-line-number\" value=\"198\"></td><td class=\"webkit-line-content\">\t\t\t};\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"199\"></td><td class=\"webkit-line-content\">\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"200\"></td><td class=\"webkit-line-content\">      function updateDatGui() {</td></tr><tr><td class=\"webkit-line-number\" value=\"201\"></td><td class=\"webkit-line-content\">        if (lastConfig.numberOfObjects !== config.numberOfObjects) {</td></tr><tr><td class=\"webkit-line-number\" value=\"202\"></td><td class=\"webkit-line-content\">          createObjects();</td></tr><tr><td class=\"webkit-line-number\" value=\"203\"></td><td class=\"webkit-line-content\">        }</td></tr><tr><td class=\"webkit-line-number\" value=\"204\"></td><td class=\"webkit-line-content\"><br></td></tr><tr><td class=\"webkit-line-number\" value=\"205\"></td><td class=\"webkit-line-content\">        if (lastConfig.sizePowerOfTwo !== config.sizePowerOfTwo) {</td></tr><tr><td class=\"webkit-line-number\" value=\"206\"></td><td class=\"webkit-line-content\">          initSpatialHash();</td></tr><tr><td class=\"webkit-line-number\" value=\"207\"></td><td class=\"webkit-line-content\">        }</td></tr><tr><td class=\"webkit-line-number\" value=\"208\"></td><td class=\"webkit-line-content\">                </td></tr><tr><td class=\"webkit-line-number\" value=\"209\"></td><td class=\"webkit-line-content\">        saveLastConfig();</td></tr><tr><td class=\"webkit-line-number\" value=\"210\"></td><td class=\"webkit-line-content\">      }\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"211\"></td><td class=\"webkit-line-content\">\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"212\"></td><td class=\"webkit-line-content\">\t\t\t/*</td></tr><tr><td class=\"webkit-line-number\" value=\"213\"></td><td class=\"webkit-line-content\">\t\t\t * our main loop</td></tr><tr><td class=\"webkit-line-number\" value=\"214\"></td><td class=\"webkit-line-content\">\t\t\t */</td></tr><tr><td class=\"webkit-line-number\" value=\"215\"></td><td class=\"webkit-line-content\">\t\t\tvar loop = function() {</td></tr><tr><td class=\"webkit-line-number\" value=\"216\"></td><td class=\"webkit-line-content\">        updateDatGui();</td></tr><tr><td class=\"webkit-line-number\" value=\"217\"></td><td class=\"webkit-line-content\">\t\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"218\"></td><td class=\"webkit-line-content\">\t\t\t\tvar returnObjects = [];</td></tr><tr><td class=\"webkit-line-number\" value=\"219\"></td><td class=\"webkit-line-content\">\t\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"220\"></td><td class=\"webkit-line-content\">\t\t\t\t//clear the tree</td></tr><tr><td class=\"webkit-line-number\" value=\"221\"></td><td class=\"webkit-line-content\">\t\t\t\tmyTree.clear();</td></tr><tr><td class=\"webkit-line-number\" value=\"222\"></td><td class=\"webkit-line-content\">\t\t\t\tctx.clearRect(0, 0, 400, 300);</td></tr><tr><td class=\"webkit-line-number\" value=\"223\"></td><td class=\"webkit-line-content\">\t\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"224\"></td><td class=\"webkit-line-content\">\t\t\t\t//update myObjects and insert them into the tree again</td></tr><tr><td class=\"webkit-line-number\" value=\"225\"></td><td class=\"webkit-line-content\">\t\t\t\tfor( var i=0;i&lt;myObjects.length;i=i+1 ) {</td></tr><tr><td class=\"webkit-line-number\" value=\"226\"></td><td class=\"webkit-line-content\">\t\t\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"227\"></td><td class=\"webkit-line-content\">\t\t\t\t\tmyObjects[i].x += myObjects[i].vx;</td></tr><tr><td class=\"webkit-line-number\" value=\"228\"></td><td class=\"webkit-line-content\">\t\t\t\t\tmyObjects[i].y += myObjects[i].vy;</td></tr><tr><td class=\"webkit-line-number\" value=\"229\"></td><td class=\"webkit-line-content\">\t\t\t\t\tmyObjects[i].check = false;</td></tr><tr><td class=\"webkit-line-number\" value=\"230\"></td><td class=\"webkit-line-content\">\t\t\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"231\"></td><td class=\"webkit-line-content\">\t\t\t\t\tif( myObjects[i].x &gt; 400 ) myObjects[i].x = 0;</td></tr><tr><td class=\"webkit-line-number\" value=\"232\"></td><td class=\"webkit-line-content\">\t\t\t\t\tif( myObjects[i].x &lt; 0 ) myObjects[i].x = 400;</td></tr><tr><td class=\"webkit-line-number\" value=\"233\"></td><td class=\"webkit-line-content\">\t\t\t\t\tif( myObjects[i].y &gt; 300 ) myObjects[i].y = 0;</td></tr><tr><td class=\"webkit-line-number\" value=\"234\"></td><td class=\"webkit-line-content\">\t\t\t\t\tif( myObjects[i].y &lt; 0 ) myObjects[i].y = 300;</td></tr><tr><td class=\"webkit-line-number\" value=\"235\"></td><td class=\"webkit-line-content\">\t\t\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"236\"></td><td class=\"webkit-line-content\">\t\t\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"237\"></td><td class=\"webkit-line-content\">\t\t\t\t\tmyTree.insert( myObjects[i] );</td></tr><tr><td class=\"webkit-line-number\" value=\"238\"></td><td class=\"webkit-line-content\">\t\t\t\t}</td></tr><tr><td class=\"webkit-line-number\" value=\"239\"></td><td class=\"webkit-line-content\">\t\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"240\"></td><td class=\"webkit-line-content\">\t\t\t\t//draw hero</td></tr><tr><td class=\"webkit-line-number\" value=\"241\"></td><td class=\"webkit-line-content\">\t\t\t\tctx.strokeStyle = 'rgba(0,255,0,0.5)';</td></tr><tr><td class=\"webkit-line-number\" value=\"242\"></td><td class=\"webkit-line-content\">\t\t\t\tctx.strokeRect( myHero.x, myHero.y, myHero.width, myHero.height );</td></tr><tr><td class=\"webkit-line-number\" value=\"243\"></td><td class=\"webkit-line-content\">\t\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"244\"></td><td class=\"webkit-line-content\">\t\t\t\t//retrieve all objects in the bounds of the hero </td></tr><tr><td class=\"webkit-line-number\" value=\"245\"></td><td class=\"webkit-line-content\">\t\t\t\treturnObjects = myTree.retrieve( myHero );</td></tr><tr><td class=\"webkit-line-number\" value=\"246\"></td><td class=\"webkit-line-content\">\t\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"247\"></td><td class=\"webkit-line-content\">\t\t\t\t//flag retrieved objects</td></tr><tr><td class=\"webkit-line-number\" value=\"248\"></td><td class=\"webkit-line-content\">\t\t\t\tfor( i=0;i&lt;returnObjects.length;i=i+1 ) {</td></tr><tr><td class=\"webkit-line-number\" value=\"249\"></td><td class=\"webkit-line-content\">\t\t\t\t\treturnObjects[ i ].check = true;</td></tr><tr><td class=\"webkit-line-number\" value=\"250\"></td><td class=\"webkit-line-content\">\t\t\t\t}</td></tr><tr><td class=\"webkit-line-number\" value=\"251\"></td><td class=\"webkit-line-content\">\t\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"252\"></td><td class=\"webkit-line-content\">\t\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"253\"></td><td class=\"webkit-line-content\">        /*</td></tr><tr><td class=\"webkit-line-number\" value=\"254\"></td><td class=\"webkit-line-content\">\t\t\t\tdrawQuadtree( myTree );</td></tr><tr><td class=\"webkit-line-number\" value=\"255\"></td><td class=\"webkit-line-content\">        */</td></tr><tr><td class=\"webkit-line-number\" value=\"256\"></td><td class=\"webkit-line-content\">\t\t\t\tdrawObjects( myTree );</td></tr><tr><td class=\"webkit-line-number\" value=\"257\"></td><td class=\"webkit-line-content\">\t\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"258\"></td><td class=\"webkit-line-content\">\t\t\t\trequestAnimFrame( loop );</td></tr><tr><td class=\"webkit-line-number\" value=\"259\"></td><td class=\"webkit-line-content\">\t\t\t};</td></tr><tr><td class=\"webkit-line-number\" value=\"260\"></td><td class=\"webkit-line-content\">\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"261\"></td><td class=\"webkit-line-content\">\t\t\t//create objects</td></tr><tr><td class=\"webkit-line-number\" value=\"262\"></td><td class=\"webkit-line-content\">\t\t\tcreateObjects();</td></tr><tr><td class=\"webkit-line-number\" value=\"263\"></td><td class=\"webkit-line-content\">\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"264\"></td><td class=\"webkit-line-content\">\t\t\t//init first loop</td></tr><tr><td class=\"webkit-line-number\" value=\"265\"></td><td class=\"webkit-line-content\">\t\t\tloop();</td></tr><tr><td class=\"webkit-line-number\" value=\"266\"></td><td class=\"webkit-line-content\">\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"267\"></td><td class=\"webkit-line-content\">\t\t\t//set eventListener for mousemove</td></tr><tr><td class=\"webkit-line-number\" value=\"268\"></td><td class=\"webkit-line-content\">\t\t\tdocument.getElementById('canvas').addEventListener('mousemove', handleMousemove);</td></tr><tr><td class=\"webkit-line-number\" value=\"269\"></td><td class=\"webkit-line-content\">\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"270\"></td><td class=\"webkit-line-content\">\t\t\t//make myTree available in global namespace</td></tr><tr><td class=\"webkit-line-number\" value=\"271\"></td><td class=\"webkit-line-content\">\t\t\tw.myTree = myTree;</td></tr><tr><td class=\"webkit-line-number\" value=\"272\"></td><td class=\"webkit-line-content\">\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"273\"></td><td class=\"webkit-line-content\">\t\t})(window, Math);</td></tr><tr><td class=\"webkit-line-number\" value=\"274\"></td><td class=\"webkit-line-content\">\t\t<span class=\"webkit-html-tag\">&lt;/script&gt;</span></td></tr><tr><td class=\"webkit-line-number\" value=\"275\"></td><td class=\"webkit-line-content\">\t<span class=\"webkit-html-tag\">&lt;/body&gt;</span></td></tr><tr><td class=\"webkit-line-number\" value=\"276\"></td><td class=\"webkit-line-content\"><span class=\"webkit-html-tag\">&lt;/html&gt;</span></td></tr><tr><td class=\"webkit-line-number\" value=\"277\"></td><td class=\"webkit-line-content\"><span class=\"webkit-html-end-of-file\"></span></td></tr></tbody></table></body></html>"],"id":1}],[{"start":{"row":1,"column":0},"end":{"row":1,"column":128},"action":"remove","lines":["<!-- saved from url=(0098)http://zufallsgenerator.github.io/assets/code/2014-01-26/spatialhash/examples/insert_retrieve.html -->"],"id":2}],[{"start":{"row":0,"column":0},"end":{"row":2,"column":34338},"action":"remove","lines":["","","<html><head><meta http-equiv=\"Content-Type\" content=\"text/html; charset=ISO-8859-1\"></head><body><div class=\"webkit-line-gutter-backdrop\"></div><table><tbody><tr><td class=\"webkit-line-number\" value=\"1\"></td><td class=\"webkit-line-content\"><span class=\"webkit-html-doctype\">&lt;!doctype html&gt;</span></td></tr><tr><td class=\"webkit-line-number\" value=\"2\"></td><td class=\"webkit-line-content\"><span class=\"webkit-html-tag\">&lt;html&gt;</span></td></tr><tr><td class=\"webkit-line-number\" value=\"3\"></td><td class=\"webkit-line-content\">\t<span class=\"webkit-html-tag\">&lt;head&gt;</span></td></tr><tr><td class=\"webkit-line-number\" value=\"4\"></td><td class=\"webkit-line-content\">\t\t<span class=\"webkit-html-tag\">&lt;title&gt;</span>Quadtree Test<span class=\"webkit-html-tag\">&lt;/title&gt;</span></td></tr><tr><td class=\"webkit-line-number\" value=\"5\"></td><td class=\"webkit-line-content\">\t\t<span class=\"webkit-html-tag\">&lt;style <span class=\"webkit-html-attribute-name\">type</span>=\"<span class=\"webkit-html-attribute-value\">text/css</span>\"&gt;</span></td></tr><tr><td class=\"webkit-line-number\" value=\"6\"></td><td class=\"webkit-line-content\">\t\t\t* {</td></tr><tr><td class=\"webkit-line-number\" value=\"7\"></td><td class=\"webkit-line-content\">\t\t\t\tmargin: 0;</td></tr><tr><td class=\"webkit-line-number\" value=\"8\"></td><td class=\"webkit-line-content\">\t\t\t\tpadding: 0;</td></tr><tr><td class=\"webkit-line-number\" value=\"9\"></td><td class=\"webkit-line-content\">\t\t\t}</td></tr><tr><td class=\"webkit-line-number\" value=\"10\"></td><td class=\"webkit-line-content\">\t\t\tbody {</td></tr><tr><td class=\"webkit-line-number\" value=\"11\"></td><td class=\"webkit-line-content\">\t\t\t\tfont-family: Arial, Helvetica, sans-serif;</td></tr><tr><td class=\"webkit-line-number\" value=\"12\"></td><td class=\"webkit-line-content\">\t\t\t\tfont-size: 12px;</td></tr><tr><td class=\"webkit-line-number\" value=\"13\"></td><td class=\"webkit-line-content\">\t\t\t\tpadding: 40px;</td></tr><tr><td class=\"webkit-line-number\" value=\"14\"></td><td class=\"webkit-line-content\">\t\t\t\tbackground: #fff;</td></tr><tr><td class=\"webkit-line-number\" value=\"15\"></td><td class=\"webkit-line-content\">\t\t\t}</td></tr><tr><td class=\"webkit-line-number\" value=\"16\"></td><td class=\"webkit-line-content\">\t\t\t#canvasContainer {</td></tr><tr><td class=\"webkit-line-number\" value=\"17\"></td><td class=\"webkit-line-content\">\t\t\t\tbackground: #111;</td></tr><tr><td class=\"webkit-line-number\" value=\"18\"></td><td class=\"webkit-line-content\">\t\t\t}</td></tr><tr><td class=\"webkit-line-number\" value=\"19\"></td><td class=\"webkit-line-content\">\t\t\t#canvasContainer canvas {</td></tr><tr><td class=\"webkit-line-number\" value=\"20\"></td><td class=\"webkit-line-content\">\t\t\t\tdisplay: block;</td></tr><tr><td class=\"webkit-line-number\" value=\"21\"></td><td class=\"webkit-line-content\">\t\t\t\tmargin: 0 auto;</td></tr><tr><td class=\"webkit-line-number\" value=\"22\"></td><td class=\"webkit-line-content\">\t\t\t\tbackground: #000;</td></tr><tr><td class=\"webkit-line-number\" value=\"23\"></td><td class=\"webkit-line-content\">\t\t\t}</td></tr><tr><td class=\"webkit-line-number\" value=\"24\"></td><td class=\"webkit-line-content\">\t\t<span class=\"webkit-html-tag\">&lt;/style&gt;</span></td></tr><tr><td class=\"webkit-line-number\" value=\"25\"></td><td class=\"webkit-line-content\">\t<span class=\"webkit-html-tag\">&lt;/head&gt;</span></td></tr><tr><td class=\"webkit-line-number\" value=\"26\"></td><td class=\"webkit-line-content\">\t<span class=\"webkit-html-tag\">&lt;body&gt;</span></td></tr><tr><td class=\"webkit-line-number\" value=\"27\"></td><td class=\"webkit-line-content\">    <span class=\"webkit-html-tag\">&lt;h1&gt;</span>Spatial Hashing<span class=\"webkit-html-tag\">&lt;/h1&gt;</span></td></tr><tr><td class=\"webkit-line-number\" value=\"28\"></td><td class=\"webkit-line-content\">    <span class=\"webkit-html-tag\">&lt;div <span class=\"webkit-html-attribute-name\">id</span>=\"<span class=\"webkit-html-attribute-value\">controllerContainer</span>\" <span class=\"webkit-html-attribute-name\">style</span>=\"<span class=\"webkit-html-attribute-value\">float: right;</span>\"&gt;</span></td></tr><tr><td class=\"webkit-line-number\" value=\"29\"></td><td class=\"webkit-line-content\">    <span class=\"webkit-html-tag\">&lt;/div&gt;</span></td></tr><tr><td class=\"webkit-line-number\" value=\"30\"></td><td class=\"webkit-line-content\">\t\t<span class=\"webkit-html-tag\">&lt;div <span class=\"webkit-html-attribute-name\">id</span>=\"<span class=\"webkit-html-attribute-value\">canvasContainer</span>\"&gt;</span></td></tr><tr><td class=\"webkit-line-number\" value=\"31\"></td><td class=\"webkit-line-content\">\t\t\t<span class=\"webkit-html-tag\">&lt;canvas <span class=\"webkit-html-attribute-name\">id</span>=\"<span class=\"webkit-html-attribute-value\">canvas</span>\" <span class=\"webkit-html-attribute-name\">width</span>=\"<span class=\"webkit-html-attribute-value\">400</span>\" <span class=\"webkit-html-attribute-name\">height</span>=\"<span class=\"webkit-html-attribute-value\">300</span>\"&gt;</span><span class=\"webkit-html-tag\">&lt;/canvas&gt;</span></td></tr><tr><td class=\"webkit-line-number\" value=\"32\"></td><td class=\"webkit-line-content\">\t\t<span class=\"webkit-html-tag\">&lt;/div&gt;</span></td></tr><tr><td class=\"webkit-line-number\" value=\"33\"></td><td class=\"webkit-line-content\">\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"34\"></td><td class=\"webkit-line-content\"><span class=\"webkit-html-comment\">&lt;!--\t\t&lt;script src=\"../quadtree.js\"&gt;&lt;/script&gt;--&gt;</span></td></tr><tr><td class=\"webkit-line-number\" value=\"35\"></td><td class=\"webkit-line-content\">\t\t<span class=\"webkit-html-tag\">&lt;script <span class=\"webkit-html-attribute-name\">src</span>=\"<a class=\"webkit-html-attribute-value webkit-html-resource-link\" target=\"_blank\" href=\"http://zufallsgenerator.github.io/assets/code/2014-01-26/spatialhash/spatialhash.js\">../spatialhash.js</a>\"&gt;</span><span class=\"webkit-html-tag\">&lt;/script&gt;</span></td></tr><tr><td class=\"webkit-line-number\" value=\"36\"></td><td class=\"webkit-line-content\">    <span class=\"webkit-html-tag\">&lt;script <span class=\"webkit-html-attribute-name\">type</span>=\"<span class=\"webkit-html-attribute-value\">text/javascript</span>\" <span class=\"webkit-html-attribute-name\">src</span>=\"<a class=\"webkit-html-attribute-value webkit-html-resource-link\" target=\"_blank\" href=\"http://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.5/dat.gui.min.js\">http://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.5/dat.gui.min.js</a>\"&gt;</span><span class=\"webkit-html-tag\">&lt;/script&gt;</span></td></tr><tr><td class=\"webkit-line-number\" value=\"37\"></td><td class=\"webkit-line-content\">\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"38\"></td><td class=\"webkit-line-content\">\t\t<span class=\"webkit-html-tag\">&lt;script&gt;</span>\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"39\"></td><td class=\"webkit-line-content\">\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"40\"></td><td class=\"webkit-line-content\">\t\t(function(w, M) {</td></tr><tr><td class=\"webkit-line-number\" value=\"41\"></td><td class=\"webkit-line-content\">      var config = {</td></tr><tr><td class=\"webkit-line-number\" value=\"42\"></td><td class=\"webkit-line-content\">        numberOfObjects: 200,</td></tr><tr><td class=\"webkit-line-number\" value=\"43\"></td><td class=\"webkit-line-content\">        sizePowerOfTwo: 4</td></tr><tr><td class=\"webkit-line-number\" value=\"44\"></td><td class=\"webkit-line-content\">      };</td></tr><tr><td class=\"webkit-line-number\" value=\"45\"></td><td class=\"webkit-line-content\">      var lastConfig = {};</td></tr><tr><td class=\"webkit-line-number\" value=\"46\"></td><td class=\"webkit-line-content\">      </td></tr><tr><td class=\"webkit-line-number\" value=\"47\"></td><td class=\"webkit-line-content\">      function saveLastConfig() {</td></tr><tr><td class=\"webkit-line-number\" value=\"48\"></td><td class=\"webkit-line-content\">        lastConfig.numberOfObjects = config.numberOfObjects;</td></tr><tr><td class=\"webkit-line-number\" value=\"49\"></td><td class=\"webkit-line-content\">        lastConfig.sizePowerOfTwo = config.sizePowerOfTwo;</td></tr><tr><td class=\"webkit-line-number\" value=\"50\"></td><td class=\"webkit-line-content\">      }</td></tr><tr><td class=\"webkit-line-number\" value=\"51\"></td><td class=\"webkit-line-content\">      </td></tr><tr><td class=\"webkit-line-number\" value=\"52\"></td><td class=\"webkit-line-content\">      </td></tr><tr><td class=\"webkit-line-number\" value=\"53\"></td><td class=\"webkit-line-content\">      </td></tr><tr><td class=\"webkit-line-number\" value=\"54\"></td><td class=\"webkit-line-content\">      var gui = new dat.GUI({autoPlace: false});</td></tr><tr><td class=\"webkit-line-number\" value=\"55\"></td><td class=\"webkit-line-content\">      var container = document.getElementById('controllerContainer');</td></tr><tr><td class=\"webkit-line-number\" value=\"56\"></td><td class=\"webkit-line-content\">      container.appendChild(gui.domElement);</td></tr><tr><td class=\"webkit-line-number\" value=\"57\"></td><td class=\"webkit-line-content\">      gui.add(config, \"numberOfObjects\", 1, 1000).step(1);</td></tr><tr><td class=\"webkit-line-number\" value=\"58\"></td><td class=\"webkit-line-content\">      gui.add(config, \"sizePowerOfTwo\", 1, 32).step(1);</td></tr><tr><td class=\"webkit-line-number\" value=\"59\"></td><td class=\"webkit-line-content\">      saveLastConfig();</td></tr><tr><td class=\"webkit-line-number\" value=\"60\"></td><td class=\"webkit-line-content\"><br></td></tr><tr><td class=\"webkit-line-number\" value=\"61\"></td><td class=\"webkit-line-content\">      \t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"62\"></td><td class=\"webkit-line-content\">\t\t\tw.requestAnimFrame = (function () {</td></tr><tr><td class=\"webkit-line-number\" value=\"63\"></td><td class=\"webkit-line-content\">\t\t\t\treturn  w.requestAnimationFrame ||</td></tr><tr><td class=\"webkit-line-number\" value=\"64\"></td><td class=\"webkit-line-content\">\t\t\t\t\tw.webkitRequestAnimationFrame ||</td></tr><tr><td class=\"webkit-line-number\" value=\"65\"></td><td class=\"webkit-line-content\">\t\t\t\t\tw.mozRequestAnimationFrame ||</td></tr><tr><td class=\"webkit-line-number\" value=\"66\"></td><td class=\"webkit-line-content\">\t\t\t\t\tw.oRequestAnimationFrame ||</td></tr><tr><td class=\"webkit-line-number\" value=\"67\"></td><td class=\"webkit-line-content\">\t\t\t\t\tw.msRequestAnimationFrame ||</td></tr><tr><td class=\"webkit-line-number\" value=\"68\"></td><td class=\"webkit-line-content\">\t\t\t\t\tfunction (callback) {</td></tr><tr><td class=\"webkit-line-number\" value=\"69\"></td><td class=\"webkit-line-content\">\t\t\t\t\t\tw.setTimeout(callback, 1000 / 60);</td></tr><tr><td class=\"webkit-line-number\" value=\"70\"></td><td class=\"webkit-line-content\">\t\t\t\t\t};</td></tr><tr><td class=\"webkit-line-number\" value=\"71\"></td><td class=\"webkit-line-content\">\t\t\t})();</td></tr><tr><td class=\"webkit-line-number\" value=\"72\"></td><td class=\"webkit-line-content\">\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"73\"></td><td class=\"webkit-line-content\">\t\t\tvar ctx = document.getElementById('canvas').getContext('2d');</td></tr><tr><td class=\"webkit-line-number\" value=\"74\"></td><td class=\"webkit-line-content\">\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"75\"></td><td class=\"webkit-line-content\">\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"76\"></td><td class=\"webkit-line-content\">\t\t\t/*</td></tr><tr><td class=\"webkit-line-number\" value=\"77\"></td><td class=\"webkit-line-content\">\t\t\t * the main Quadtree</td></tr><tr><td class=\"webkit-line-number\" value=\"78\"></td><td class=\"webkit-line-content\">\t\t\t */</td></tr><tr><td class=\"webkit-line-number\" value=\"79\"></td><td class=\"webkit-line-content\">       /*</td></tr><tr><td class=\"webkit-line-number\" value=\"80\"></td><td class=\"webkit-line-content\">\t\t\tvar myTree = new Quadtree({</td></tr><tr><td class=\"webkit-line-number\" value=\"81\"></td><td class=\"webkit-line-content\">\t\t\t\tx: 0,</td></tr><tr><td class=\"webkit-line-number\" value=\"82\"></td><td class=\"webkit-line-content\">\t\t\t\ty: 0,</td></tr><tr><td class=\"webkit-line-number\" value=\"83\"></td><td class=\"webkit-line-content\">\t\t\t\twidth: 400,</td></tr><tr><td class=\"webkit-line-number\" value=\"84\"></td><td class=\"webkit-line-content\">\t\t\t\theight: 300</td></tr><tr><td class=\"webkit-line-number\" value=\"85\"></td><td class=\"webkit-line-content\">\t\t\t});</td></tr><tr><td class=\"webkit-line-number\" value=\"86\"></td><td class=\"webkit-line-content\">      */</td></tr><tr><td class=\"webkit-line-number\" value=\"87\"></td><td class=\"webkit-line-content\">      var myTree;</td></tr><tr><td class=\"webkit-line-number\" value=\"88\"></td><td class=\"webkit-line-content\">      </td></tr><tr><td class=\"webkit-line-number\" value=\"89\"></td><td class=\"webkit-line-content\">      function initSpatialHash() {</td></tr><tr><td class=\"webkit-line-number\" value=\"90\"></td><td class=\"webkit-line-content\">        myTree = new SpatialHash(config.sizePowerOfTwo);</td></tr><tr><td class=\"webkit-line-number\" value=\"91\"></td><td class=\"webkit-line-content\">      }</td></tr><tr><td class=\"webkit-line-number\" value=\"92\"></td><td class=\"webkit-line-content\">      </td></tr><tr><td class=\"webkit-line-number\" value=\"93\"></td><td class=\"webkit-line-content\">      initSpatialHash();</td></tr><tr><td class=\"webkit-line-number\" value=\"94\"></td><td class=\"webkit-line-content\">\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"95\"></td><td class=\"webkit-line-content\">\t\t\t/*</td></tr><tr><td class=\"webkit-line-number\" value=\"96\"></td><td class=\"webkit-line-content\">\t\t\t * our objects will be stored here</td></tr><tr><td class=\"webkit-line-number\" value=\"97\"></td><td class=\"webkit-line-content\">\t\t\t */</td></tr><tr><td class=\"webkit-line-number\" value=\"98\"></td><td class=\"webkit-line-content\">\t\t\tvar myObjects = [];</td></tr><tr><td class=\"webkit-line-number\" value=\"99\"></td><td class=\"webkit-line-content\">\t\t\t\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"100\"></td><td class=\"webkit-line-content\">\t\t\t/*</td></tr><tr><td class=\"webkit-line-number\" value=\"101\"></td><td class=\"webkit-line-content\">\t\t\t * our \"hero\"</td></tr><tr><td class=\"webkit-line-number\" value=\"102\"></td><td class=\"webkit-line-content\">\t\t\t */</td></tr><tr><td class=\"webkit-line-number\" value=\"103\"></td><td class=\"webkit-line-content\">\t\t\tvar myHero = {</td></tr><tr><td class=\"webkit-line-number\" value=\"104\"></td><td class=\"webkit-line-content\">\t\t\t\tx : 0,</td></tr><tr><td class=\"webkit-line-number\" value=\"105\"></td><td class=\"webkit-line-content\">\t\t\t\ty : 0,</td></tr><tr><td class=\"webkit-line-number\" value=\"106\"></td><td class=\"webkit-line-content\">\t\t\t\twidth : 20,</td></tr><tr><td class=\"webkit-line-number\" value=\"107\"></td><td class=\"webkit-line-content\">\t\t\t\theight : 20</td></tr><tr><td class=\"webkit-line-number\" value=\"108\"></td><td class=\"webkit-line-content\">\t\t\t};</td></tr><tr><td class=\"webkit-line-number\" value=\"109\"></td><td class=\"webkit-line-content\">\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"110\"></td><td class=\"webkit-line-content\">\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"111\"></td><td class=\"webkit-line-content\">\t\t\t/*</td></tr><tr><td class=\"webkit-line-number\" value=\"112\"></td><td class=\"webkit-line-content\">\t\t\t * create some objects and save them in myObjects</td></tr><tr><td class=\"webkit-line-number\" value=\"113\"></td><td class=\"webkit-line-content\">\t\t\t */</td></tr><tr><td class=\"webkit-line-number\" value=\"114\"></td><td class=\"webkit-line-content\">\t\t\tvar createObjects = function() {</td></tr><tr><td class=\"webkit-line-number\" value=\"115\"></td><td class=\"webkit-line-content\">        myObjects.length = 0;</td></tr><tr><td class=\"webkit-line-number\" value=\"116\"></td><td class=\"webkit-line-content\">\t\t\t\tfor( var i=0;i&lt;config.numberOfObjects;i=i+1 ) {</td></tr><tr><td class=\"webkit-line-number\" value=\"117\"></td><td class=\"webkit-line-content\">          myObjects.push({</td></tr><tr><td class=\"webkit-line-number\" value=\"118\"></td><td class=\"webkit-line-content\">\t\t\t\t\t\tx : randMinMax(10, 390),</td></tr><tr><td class=\"webkit-line-number\" value=\"119\"></td><td class=\"webkit-line-content\">\t\t\t\t\t\ty : randMinMax(10, 290),</td></tr><tr><td class=\"webkit-line-number\" value=\"120\"></td><td class=\"webkit-line-content\">\t\t\t\t\t\twidth : randMinMax(10, 20),</td></tr><tr><td class=\"webkit-line-number\" value=\"121\"></td><td class=\"webkit-line-content\">\t\t\t\t\t\theight : randMinMax(10, 20),</td></tr><tr><td class=\"webkit-line-number\" value=\"122\"></td><td class=\"webkit-line-content\">\t\t\t\t\t\tvx: randMinMax(-1,1),</td></tr><tr><td class=\"webkit-line-number\" value=\"123\"></td><td class=\"webkit-line-content\">\t\t\t\t\t\tvy: randMinMax(-1,1),</td></tr><tr><td class=\"webkit-line-number\" value=\"124\"></td><td class=\"webkit-line-content\">\t\t\t\t\t\tcheck : false</td></tr><tr><td class=\"webkit-line-number\" value=\"125\"></td><td class=\"webkit-line-content\">\t\t\t\t\t});</td></tr><tr><td class=\"webkit-line-number\" value=\"126\"></td><td class=\"webkit-line-content\">\t\t\t\t}</td></tr><tr><td class=\"webkit-line-number\" value=\"127\"></td><td class=\"webkit-line-content\">\t\t\t};</td></tr><tr><td class=\"webkit-line-number\" value=\"128\"></td><td class=\"webkit-line-content\">\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"129\"></td><td class=\"webkit-line-content\">\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"130\"></td><td class=\"webkit-line-content\">\t\t\t/*</td></tr><tr><td class=\"webkit-line-number\" value=\"131\"></td><td class=\"webkit-line-content\">\t\t\t * draw Quadtree nodes</td></tr><tr><td class=\"webkit-line-number\" value=\"132\"></td><td class=\"webkit-line-content\">\t\t\t */</td></tr><tr><td class=\"webkit-line-number\" value=\"133\"></td><td class=\"webkit-line-content\">\t\t\tvar drawQuadtree = function( node ) {</td></tr><tr><td class=\"webkit-line-number\" value=\"134\"></td><td class=\"webkit-line-content\">\t\t\t\tvar \tbounds = node.bounds;</td></tr><tr><td class=\"webkit-line-number\" value=\"135\"></td><td class=\"webkit-line-content\">\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"136\"></td><td class=\"webkit-line-content\">\t\t\t\t//no subnodes? draw the current node</td></tr><tr><td class=\"webkit-line-number\" value=\"137\"></td><td class=\"webkit-line-content\">\t\t\t\tif( node.nodes.length === 0 ) {</td></tr><tr><td class=\"webkit-line-number\" value=\"138\"></td><td class=\"webkit-line-content\">\t\t\t\t\tctx.strokeStyle = 'rgba(255,0,0,0.2)';</td></tr><tr><td class=\"webkit-line-number\" value=\"139\"></td><td class=\"webkit-line-content\">\t\t\t\t\tctx.strokeRect(bounds.x, bounds.y, bounds.width, bounds.height);</td></tr><tr><td class=\"webkit-line-number\" value=\"140\"></td><td class=\"webkit-line-content\">\t\t\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"141\"></td><td class=\"webkit-line-content\">\t\t\t\t//has subnodes? drawQuadtree them!</td></tr><tr><td class=\"webkit-line-number\" value=\"142\"></td><td class=\"webkit-line-content\">\t\t\t\t} else {</td></tr><tr><td class=\"webkit-line-number\" value=\"143\"></td><td class=\"webkit-line-content\">\t\t\t\t\tfor( var i=0;i&lt;node.nodes.length;i=i+1 ) {</td></tr><tr><td class=\"webkit-line-number\" value=\"144\"></td><td class=\"webkit-line-content\">\t\t\t\t\t\tdrawQuadtree( node.nodes[ i ] );</td></tr><tr><td class=\"webkit-line-number\" value=\"145\"></td><td class=\"webkit-line-content\">\t\t\t\t\t}</td></tr><tr><td class=\"webkit-line-number\" value=\"146\"></td><td class=\"webkit-line-content\">\t\t\t\t}</td></tr><tr><td class=\"webkit-line-number\" value=\"147\"></td><td class=\"webkit-line-content\">\t\t\t};</td></tr><tr><td class=\"webkit-line-number\" value=\"148\"></td><td class=\"webkit-line-content\">\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"149\"></td><td class=\"webkit-line-content\">\t\t\t/*</td></tr><tr><td class=\"webkit-line-number\" value=\"150\"></td><td class=\"webkit-line-content\">\t\t\t * draw all objects in a given node </td></tr><tr><td class=\"webkit-line-number\" value=\"151\"></td><td class=\"webkit-line-content\">\t\t\t */</td></tr><tr><td class=\"webkit-line-number\" value=\"152\"></td><td class=\"webkit-line-content\">\t\t\tvar drawObjects = function( node ) {</td></tr><tr><td class=\"webkit-line-number\" value=\"153\"></td><td class=\"webkit-line-content\">\t\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"154\"></td><td class=\"webkit-line-content\">        /*</td></tr><tr><td class=\"webkit-line-number\" value=\"155\"></td><td class=\"webkit-line-content\">\t\t\t\tvar obj;</td></tr><tr><td class=\"webkit-line-number\" value=\"156\"></td><td class=\"webkit-line-content\">        */</td></tr><tr><td class=\"webkit-line-number\" value=\"157\"></td><td class=\"webkit-line-content\">\t\t\t\tvar obj, objects = node.retrieve(); // get all</td></tr><tr><td class=\"webkit-line-number\" value=\"158\"></td><td class=\"webkit-line-content\"><br></td></tr><tr><td class=\"webkit-line-number\" value=\"159\"></td><td class=\"webkit-line-content\">\t\t\t\tfor( var i=0;i&lt;objects.length;i=i+1 ) {</td></tr><tr><td class=\"webkit-line-number\" value=\"160\"></td><td class=\"webkit-line-content\">\t\t\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"161\"></td><td class=\"webkit-line-content\">\t\t\t\t\tobj = objects[ i ];</td></tr><tr><td class=\"webkit-line-number\" value=\"162\"></td><td class=\"webkit-line-content\">\t\t\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"163\"></td><td class=\"webkit-line-content\">\t\t\t\t\tif( obj.check ) {</td></tr><tr><td class=\"webkit-line-number\" value=\"164\"></td><td class=\"webkit-line-content\">\t\t\t\t\t\tctx.strokeStyle = 'rgba(255,255,255,0.9)';</td></tr><tr><td class=\"webkit-line-number\" value=\"165\"></td><td class=\"webkit-line-content\">\t\t\t\t\t} else {</td></tr><tr><td class=\"webkit-line-number\" value=\"166\"></td><td class=\"webkit-line-content\">\t\t\t\t\t\tctx.strokeStyle = 'rgba(255,255,255,0.2)';</td></tr><tr><td class=\"webkit-line-number\" value=\"167\"></td><td class=\"webkit-line-content\">\t\t\t\t\t}</td></tr><tr><td class=\"webkit-line-number\" value=\"168\"></td><td class=\"webkit-line-content\">\t\t\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"169\"></td><td class=\"webkit-line-content\">\t\t\t\t\tctx.strokeRect( obj.x, obj.y, obj.width, obj.height );</td></tr><tr><td class=\"webkit-line-number\" value=\"170\"></td><td class=\"webkit-line-content\">\t\t\t\t}</td></tr><tr><td class=\"webkit-line-number\" value=\"171\"></td><td class=\"webkit-line-content\"><br></td></tr><tr><td class=\"webkit-line-number\" value=\"172\"></td><td class=\"webkit-line-content\">\t\t\t};</td></tr><tr><td class=\"webkit-line-number\" value=\"173\"></td><td class=\"webkit-line-content\">\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"174\"></td><td class=\"webkit-line-content\">\t\t\t/*</td></tr><tr><td class=\"webkit-line-number\" value=\"175\"></td><td class=\"webkit-line-content\">\t\t\t * position hero at mouse position</td></tr><tr><td class=\"webkit-line-number\" value=\"176\"></td><td class=\"webkit-line-content\">\t\t\t */</td></tr><tr><td class=\"webkit-line-number\" value=\"177\"></td><td class=\"webkit-line-content\">\t\t\tvar handleMousemove = function(e) {</td></tr><tr><td class=\"webkit-line-number\" value=\"178\"></td><td class=\"webkit-line-content\">\t\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"179\"></td><td class=\"webkit-line-content\">\t\t\t\tvar \tmx, my;</td></tr><tr><td class=\"webkit-line-number\" value=\"180\"></td><td class=\"webkit-line-content\">\t\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"181\"></td><td class=\"webkit-line-content\">\t\t\t\tif(e.offsetX) {</td></tr><tr><td class=\"webkit-line-number\" value=\"182\"></td><td class=\"webkit-line-content\">\t\t\t\t\tmx = e.offsetX;</td></tr><tr><td class=\"webkit-line-number\" value=\"183\"></td><td class=\"webkit-line-content\">\t\t\t\t\tmy = e.offsetY;</td></tr><tr><td class=\"webkit-line-number\" value=\"184\"></td><td class=\"webkit-line-content\">\t\t\t\t} else if(e.layerX) {</td></tr><tr><td class=\"webkit-line-number\" value=\"185\"></td><td class=\"webkit-line-content\">\t\t\t\t\tmx = e.layerX;</td></tr><tr><td class=\"webkit-line-number\" value=\"186\"></td><td class=\"webkit-line-content\">\t\t\t\t\tmy = e.layerY;</td></tr><tr><td class=\"webkit-line-number\" value=\"187\"></td><td class=\"webkit-line-content\">\t\t\t\t}</td></tr><tr><td class=\"webkit-line-number\" value=\"188\"></td><td class=\"webkit-line-content\">\t\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"189\"></td><td class=\"webkit-line-content\">\t\t\t\tmyHero.x = mx;</td></tr><tr><td class=\"webkit-line-number\" value=\"190\"></td><td class=\"webkit-line-content\">\t\t\t\tmyHero.y = my;</td></tr><tr><td class=\"webkit-line-number\" value=\"191\"></td><td class=\"webkit-line-content\">\t\t\t};</td></tr><tr><td class=\"webkit-line-number\" value=\"192\"></td><td class=\"webkit-line-content\">\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"193\"></td><td class=\"webkit-line-content\">\t\t\t/*</td></tr><tr><td class=\"webkit-line-number\" value=\"194\"></td><td class=\"webkit-line-content\">\t\t\t * return a random number between min and max</td></tr><tr><td class=\"webkit-line-number\" value=\"195\"></td><td class=\"webkit-line-content\">\t\t\t */</td></tr><tr><td class=\"webkit-line-number\" value=\"196\"></td><td class=\"webkit-line-content\">\t\t\tvar randMinMax = function(min, max) {</td></tr><tr><td class=\"webkit-line-number\" value=\"197\"></td><td class=\"webkit-line-content\">\t\t\t\treturn min + (M.random() * (max - min));</td></tr><tr><td class=\"webkit-line-number\" value=\"198\"></td><td class=\"webkit-line-content\">\t\t\t};\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"199\"></td><td class=\"webkit-line-content\">\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"200\"></td><td class=\"webkit-line-content\">      function updateDatGui() {</td></tr><tr><td class=\"webkit-line-number\" value=\"201\"></td><td class=\"webkit-line-content\">        if (lastConfig.numberOfObjects !== config.numberOfObjects) {</td></tr><tr><td class=\"webkit-line-number\" value=\"202\"></td><td class=\"webkit-line-content\">          createObjects();</td></tr><tr><td class=\"webkit-line-number\" value=\"203\"></td><td class=\"webkit-line-content\">        }</td></tr><tr><td class=\"webkit-line-number\" value=\"204\"></td><td class=\"webkit-line-content\"><br></td></tr><tr><td class=\"webkit-line-number\" value=\"205\"></td><td class=\"webkit-line-content\">        if (lastConfig.sizePowerOfTwo !== config.sizePowerOfTwo) {</td></tr><tr><td class=\"webkit-line-number\" value=\"206\"></td><td class=\"webkit-line-content\">          initSpatialHash();</td></tr><tr><td class=\"webkit-line-number\" value=\"207\"></td><td class=\"webkit-line-content\">        }</td></tr><tr><td class=\"webkit-line-number\" value=\"208\"></td><td class=\"webkit-line-content\">                </td></tr><tr><td class=\"webkit-line-number\" value=\"209\"></td><td class=\"webkit-line-content\">        saveLastConfig();</td></tr><tr><td class=\"webkit-line-number\" value=\"210\"></td><td class=\"webkit-line-content\">      }\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"211\"></td><td class=\"webkit-line-content\">\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"212\"></td><td class=\"webkit-line-content\">\t\t\t/*</td></tr><tr><td class=\"webkit-line-number\" value=\"213\"></td><td class=\"webkit-line-content\">\t\t\t * our main loop</td></tr><tr><td class=\"webkit-line-number\" value=\"214\"></td><td class=\"webkit-line-content\">\t\t\t */</td></tr><tr><td class=\"webkit-line-number\" value=\"215\"></td><td class=\"webkit-line-content\">\t\t\tvar loop = function() {</td></tr><tr><td class=\"webkit-line-number\" value=\"216\"></td><td class=\"webkit-line-content\">        updateDatGui();</td></tr><tr><td class=\"webkit-line-number\" value=\"217\"></td><td class=\"webkit-line-content\">\t\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"218\"></td><td class=\"webkit-line-content\">\t\t\t\tvar returnObjects = [];</td></tr><tr><td class=\"webkit-line-number\" value=\"219\"></td><td class=\"webkit-line-content\">\t\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"220\"></td><td class=\"webkit-line-content\">\t\t\t\t//clear the tree</td></tr><tr><td class=\"webkit-line-number\" value=\"221\"></td><td class=\"webkit-line-content\">\t\t\t\tmyTree.clear();</td></tr><tr><td class=\"webkit-line-number\" value=\"222\"></td><td class=\"webkit-line-content\">\t\t\t\tctx.clearRect(0, 0, 400, 300);</td></tr><tr><td class=\"webkit-line-number\" value=\"223\"></td><td class=\"webkit-line-content\">\t\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"224\"></td><td class=\"webkit-line-content\">\t\t\t\t//update myObjects and insert them into the tree again</td></tr><tr><td class=\"webkit-line-number\" value=\"225\"></td><td class=\"webkit-line-content\">\t\t\t\tfor( var i=0;i&lt;myObjects.length;i=i+1 ) {</td></tr><tr><td class=\"webkit-line-number\" value=\"226\"></td><td class=\"webkit-line-content\">\t\t\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"227\"></td><td class=\"webkit-line-content\">\t\t\t\t\tmyObjects[i].x += myObjects[i].vx;</td></tr><tr><td class=\"webkit-line-number\" value=\"228\"></td><td class=\"webkit-line-content\">\t\t\t\t\tmyObjects[i].y += myObjects[i].vy;</td></tr><tr><td class=\"webkit-line-number\" value=\"229\"></td><td class=\"webkit-line-content\">\t\t\t\t\tmyObjects[i].check = false;</td></tr><tr><td class=\"webkit-line-number\" value=\"230\"></td><td class=\"webkit-line-content\">\t\t\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"231\"></td><td class=\"webkit-line-content\">\t\t\t\t\tif( myObjects[i].x &gt; 400 ) myObjects[i].x = 0;</td></tr><tr><td class=\"webkit-line-number\" value=\"232\"></td><td class=\"webkit-line-content\">\t\t\t\t\tif( myObjects[i].x &lt; 0 ) myObjects[i].x = 400;</td></tr><tr><td class=\"webkit-line-number\" value=\"233\"></td><td class=\"webkit-line-content\">\t\t\t\t\tif( myObjects[i].y &gt; 300 ) myObjects[i].y = 0;</td></tr><tr><td class=\"webkit-line-number\" value=\"234\"></td><td class=\"webkit-line-content\">\t\t\t\t\tif( myObjects[i].y &lt; 0 ) myObjects[i].y = 300;</td></tr><tr><td class=\"webkit-line-number\" value=\"235\"></td><td class=\"webkit-line-content\">\t\t\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"236\"></td><td class=\"webkit-line-content\">\t\t\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"237\"></td><td class=\"webkit-line-content\">\t\t\t\t\tmyTree.insert( myObjects[i] );</td></tr><tr><td class=\"webkit-line-number\" value=\"238\"></td><td class=\"webkit-line-content\">\t\t\t\t}</td></tr><tr><td class=\"webkit-line-number\" value=\"239\"></td><td class=\"webkit-line-content\">\t\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"240\"></td><td class=\"webkit-line-content\">\t\t\t\t//draw hero</td></tr><tr><td class=\"webkit-line-number\" value=\"241\"></td><td class=\"webkit-line-content\">\t\t\t\tctx.strokeStyle = 'rgba(0,255,0,0.5)';</td></tr><tr><td class=\"webkit-line-number\" value=\"242\"></td><td class=\"webkit-line-content\">\t\t\t\tctx.strokeRect( myHero.x, myHero.y, myHero.width, myHero.height );</td></tr><tr><td class=\"webkit-line-number\" value=\"243\"></td><td class=\"webkit-line-content\">\t\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"244\"></td><td class=\"webkit-line-content\">\t\t\t\t//retrieve all objects in the bounds of the hero </td></tr><tr><td class=\"webkit-line-number\" value=\"245\"></td><td class=\"webkit-line-content\">\t\t\t\treturnObjects = myTree.retrieve( myHero );</td></tr><tr><td class=\"webkit-line-number\" value=\"246\"></td><td class=\"webkit-line-content\">\t\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"247\"></td><td class=\"webkit-line-content\">\t\t\t\t//flag retrieved objects</td></tr><tr><td class=\"webkit-line-number\" value=\"248\"></td><td class=\"webkit-line-content\">\t\t\t\tfor( i=0;i&lt;returnObjects.length;i=i+1 ) {</td></tr><tr><td class=\"webkit-line-number\" value=\"249\"></td><td class=\"webkit-line-content\">\t\t\t\t\treturnObjects[ i ].check = true;</td></tr><tr><td class=\"webkit-line-number\" value=\"250\"></td><td class=\"webkit-line-content\">\t\t\t\t}</td></tr><tr><td class=\"webkit-line-number\" value=\"251\"></td><td class=\"webkit-line-content\">\t\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"252\"></td><td class=\"webkit-line-content\">\t\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"253\"></td><td class=\"webkit-line-content\">        /*</td></tr><tr><td class=\"webkit-line-number\" value=\"254\"></td><td class=\"webkit-line-content\">\t\t\t\tdrawQuadtree( myTree );</td></tr><tr><td class=\"webkit-line-number\" value=\"255\"></td><td class=\"webkit-line-content\">        */</td></tr><tr><td class=\"webkit-line-number\" value=\"256\"></td><td class=\"webkit-line-content\">\t\t\t\tdrawObjects( myTree );</td></tr><tr><td class=\"webkit-line-number\" value=\"257\"></td><td class=\"webkit-line-content\">\t\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"258\"></td><td class=\"webkit-line-content\">\t\t\t\trequestAnimFrame( loop );</td></tr><tr><td class=\"webkit-line-number\" value=\"259\"></td><td class=\"webkit-line-content\">\t\t\t};</td></tr><tr><td class=\"webkit-line-number\" value=\"260\"></td><td class=\"webkit-line-content\">\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"261\"></td><td class=\"webkit-line-content\">\t\t\t//create objects</td></tr><tr><td class=\"webkit-line-number\" value=\"262\"></td><td class=\"webkit-line-content\">\t\t\tcreateObjects();</td></tr><tr><td class=\"webkit-line-number\" value=\"263\"></td><td class=\"webkit-line-content\">\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"264\"></td><td class=\"webkit-line-content\">\t\t\t//init first loop</td></tr><tr><td class=\"webkit-line-number\" value=\"265\"></td><td class=\"webkit-line-content\">\t\t\tloop();</td></tr><tr><td class=\"webkit-line-number\" value=\"266\"></td><td class=\"webkit-line-content\">\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"267\"></td><td class=\"webkit-line-content\">\t\t\t//set eventListener for mousemove</td></tr><tr><td class=\"webkit-line-number\" value=\"268\"></td><td class=\"webkit-line-content\">\t\t\tdocument.getElementById('canvas').addEventListener('mousemove', handleMousemove);</td></tr><tr><td class=\"webkit-line-number\" value=\"269\"></td><td class=\"webkit-line-content\">\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"270\"></td><td class=\"webkit-line-content\">\t\t\t//make myTree available in global namespace</td></tr><tr><td class=\"webkit-line-number\" value=\"271\"></td><td class=\"webkit-line-content\">\t\t\tw.myTree = myTree;</td></tr><tr><td class=\"webkit-line-number\" value=\"272\"></td><td class=\"webkit-line-content\">\t\t\t</td></tr><tr><td class=\"webkit-line-number\" value=\"273\"></td><td class=\"webkit-line-content\">\t\t})(window, Math);</td></tr><tr><td class=\"webkit-line-number\" value=\"274\"></td><td class=\"webkit-line-content\">\t\t<span class=\"webkit-html-tag\">&lt;/script&gt;</span></td></tr><tr><td class=\"webkit-line-number\" value=\"275\"></td><td class=\"webkit-line-content\">\t<span class=\"webkit-html-tag\">&lt;/body&gt;</span></td></tr><tr><td class=\"webkit-line-number\" value=\"276\"></td><td class=\"webkit-line-content\"><span class=\"webkit-html-tag\">&lt;/html&gt;</span></td></tr><tr><td class=\"webkit-line-number\" value=\"277\"></td><td class=\"webkit-line-content\"><span class=\"webkit-html-end-of-file\"></span></td></tr></tbody></table></body>"],"id":3},{"start":{"row":0,"column":0},"end":{"row":1155,"column":0},"action":"insert","lines":["<html>","","<head>","    <meta http-equiv=\"Content-Type\" content=\"text/html; charset=ISO-8859-1\">","</head>","","<body>","    <div class=\"webkit-line-gutter-backdrop\"></div>","    <table>","        <tbody>","            <tr>","                <td class=\"webkit-line-number\" value=\"1\"></td>","                <td class=\"webkit-line-content\"><span class=\"webkit-html-doctype\">&lt;!doctype html&gt;</span>","                </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"2\"></td>","                <td class=\"webkit-line-content\"><span class=\"webkit-html-tag\">&lt;html&gt;</span>","                </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"3\"></td>","                <td class=\"webkit-line-content\"> <span class=\"webkit-html-tag\">&lt;head&gt;</span>","                </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"4\"></td>","                <td class=\"webkit-line-content\"> <span class=\"webkit-html-tag\">&lt;title&gt;</span>Quadtree Test<span class=\"webkit-html-tag\">&lt;/title&gt;</span>","                </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"5\"></td>","                <td class=\"webkit-line-content\"> <span class=\"webkit-html-tag\">&lt;style <span class=\"webkit-html-attribute-name\">type</span>=\"<span class=\"webkit-html-attribute-value\">text/css</span>\"&gt;</span>","                </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"6\"></td>","                <td class=\"webkit-line-content\"> * {</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"7\"></td>","                <td class=\"webkit-line-content\"> margin: 0;</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"8\"></td>","                <td class=\"webkit-line-content\"> padding: 0;</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"9\"></td>","                <td class=\"webkit-line-content\"> }</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"10\"></td>","                <td class=\"webkit-line-content\"> body {</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"11\"></td>","                <td class=\"webkit-line-content\"> font-family: Arial, Helvetica, sans-serif;</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"12\"></td>","                <td class=\"webkit-line-content\"> font-size: 12px;</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"13\"></td>","                <td class=\"webkit-line-content\"> padding: 40px;</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"14\"></td>","                <td class=\"webkit-line-content\"> background: #fff;</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"15\"></td>","                <td class=\"webkit-line-content\"> }</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"16\"></td>","                <td class=\"webkit-line-content\"> #canvasContainer {</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"17\"></td>","                <td class=\"webkit-line-content\"> background: #111;</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"18\"></td>","                <td class=\"webkit-line-content\"> }</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"19\"></td>","                <td class=\"webkit-line-content\"> #canvasContainer canvas {</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"20\"></td>","                <td class=\"webkit-line-content\"> display: block;</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"21\"></td>","                <td class=\"webkit-line-content\"> margin: 0 auto;</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"22\"></td>","                <td class=\"webkit-line-content\"> background: #000;</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"23\"></td>","                <td class=\"webkit-line-content\"> }</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"24\"></td>","                <td class=\"webkit-line-content\"> <span class=\"webkit-html-tag\">&lt;/style&gt;</span>","                </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"25\"></td>","                <td class=\"webkit-line-content\"> <span class=\"webkit-html-tag\">&lt;/head&gt;</span>","                </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"26\"></td>","                <td class=\"webkit-line-content\"> <span class=\"webkit-html-tag\">&lt;body&gt;</span>","                </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"27\"></td>","                <td class=\"webkit-line-content\"> <span class=\"webkit-html-tag\">&lt;h1&gt;</span>Spatial Hashing<span class=\"webkit-html-tag\">&lt;/h1&gt;</span>","                </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"28\"></td>","                <td class=\"webkit-line-content\"> <span class=\"webkit-html-tag\">&lt;div <span class=\"webkit-html-attribute-name\">id</span>=\"<span class=\"webkit-html-attribute-value\">controllerContainer</span>\" <span class=\"webkit-html-attribute-name\">style</span>=\"<span class=\"webkit-html-attribute-value\">float: right;</span>\"&gt;</span>","                </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"29\"></td>","                <td class=\"webkit-line-content\"> <span class=\"webkit-html-tag\">&lt;/div&gt;</span>","                </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"30\"></td>","                <td class=\"webkit-line-content\"> <span class=\"webkit-html-tag\">&lt;div <span class=\"webkit-html-attribute-name\">id</span>=\"<span class=\"webkit-html-attribute-value\">canvasContainer</span>\"&gt;</span>","                </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"31\"></td>","                <td class=\"webkit-line-content\"> <span class=\"webkit-html-tag\">&lt;canvas <span class=\"webkit-html-attribute-name\">id</span>=\"<span class=\"webkit-html-attribute-value\">canvas</span>\" <span class=\"webkit-html-attribute-name\">width</span>=\"<span class=\"webkit-html-attribute-value\">400</span>\"","                    <span class=\"webkit-html-attribute-name\">height</span>=\"<span class=\"webkit-html-attribute-value\">300</span>\"&gt;</span><span class=\"webkit-html-tag\">&lt;/canvas&gt;</span>","                </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"32\"></td>","                <td class=\"webkit-line-content\"> <span class=\"webkit-html-tag\">&lt;/div&gt;</span>","                </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"33\"></td>","                <td class=\"webkit-line-content\"> </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"34\"></td>","                <td class=\"webkit-line-content\"><span class=\"webkit-html-comment\">&lt;!--\t\t&lt;script src=\"../quadtree.js\"&gt;&lt;/script&gt;--&gt;</span>","                </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"35\"></td>","                <td class=\"webkit-line-content\"> <span class=\"webkit-html-tag\">&lt;script <span class=\"webkit-html-attribute-name\">src</span>=\"<a class=\"webkit-html-attribute-value webkit-html-resource-link\" target=\"_blank\" href=\"http://zufallsgenerator.github.io/assets/code/2014-01-26/spatialhash/spatialhash.js\">../spatialhash.js</a>\"&gt;</span>","                    <span","                    class=\"webkit-html-tag\">&lt;/script&gt;</span>","                </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"36\"></td>","                <td class=\"webkit-line-content\"> <span class=\"webkit-html-tag\">&lt;script <span class=\"webkit-html-attribute-name\">type</span>=\"<span class=\"webkit-html-attribute-value\">text/javascript</span>\" <span class=\"webkit-html-attribute-name\">src</span>=\"<a class=\"webkit-html-attribute-value webkit-html-resource-link\"","                    target=\"_blank\" href=\"http://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.5/dat.gui.min.js\">http://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.5/dat.gui.min.js</a>\"&gt;</span><span class=\"webkit-html-tag\">&lt;/script&gt;</span>","                </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"37\"></td>","                <td class=\"webkit-line-content\"> </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"38\"></td>","                <td class=\"webkit-line-content\"> <span class=\"webkit-html-tag\">&lt;script&gt;</span> </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"39\"></td>","                <td class=\"webkit-line-content\"> </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"40\"></td>","                <td class=\"webkit-line-content\"> (function(w, M) {</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"41\"></td>","                <td class=\"webkit-line-content\"> var config = {</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"42\"></td>","                <td class=\"webkit-line-content\"> numberOfObjects: 200,</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"43\"></td>","                <td class=\"webkit-line-content\"> sizePowerOfTwo: 4</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"44\"></td>","                <td class=\"webkit-line-content\"> };</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"45\"></td>","                <td class=\"webkit-line-content\"> var lastConfig = {};</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"46\"></td>","                <td class=\"webkit-line-content\"> </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"47\"></td>","                <td class=\"webkit-line-content\"> function saveLastConfig() {</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"48\"></td>","                <td class=\"webkit-line-content\"> lastConfig.numberOfObjects = config.numberOfObjects;</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"49\"></td>","                <td class=\"webkit-line-content\"> lastConfig.sizePowerOfTwo = config.sizePowerOfTwo;</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"50\"></td>","                <td class=\"webkit-line-content\"> }</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"51\"></td>","                <td class=\"webkit-line-content\"> </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"52\"></td>","                <td class=\"webkit-line-content\"> </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"53\"></td>","                <td class=\"webkit-line-content\"> </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"54\"></td>","                <td class=\"webkit-line-content\"> var gui = new dat.GUI({autoPlace: false});</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"55\"></td>","                <td class=\"webkit-line-content\"> var container = document.getElementById('controllerContainer');</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"56\"></td>","                <td class=\"webkit-line-content\"> container.appendChild(gui.domElement);</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"57\"></td>","                <td class=\"webkit-line-content\"> gui.add(config, \"numberOfObjects\", 1, 1000).step(1);</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"58\"></td>","                <td class=\"webkit-line-content\"> gui.add(config, \"sizePowerOfTwo\", 1, 32).step(1);</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"59\"></td>","                <td class=\"webkit-line-content\"> saveLastConfig();</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"60\"></td>","                <td class=\"webkit-line-content\">","                    <br>","                </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"61\"></td>","                <td class=\"webkit-line-content\"> </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"62\"></td>","                <td class=\"webkit-line-content\"> w.requestAnimFrame = (function () {</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"63\"></td>","                <td class=\"webkit-line-content\"> return w.requestAnimationFrame ||</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"64\"></td>","                <td class=\"webkit-line-content\"> w.webkitRequestAnimationFrame ||</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"65\"></td>","                <td class=\"webkit-line-content\"> w.mozRequestAnimationFrame ||</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"66\"></td>","                <td class=\"webkit-line-content\"> w.oRequestAnimationFrame ||</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"67\"></td>","                <td class=\"webkit-line-content\"> w.msRequestAnimationFrame ||</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"68\"></td>","                <td class=\"webkit-line-content\"> function (callback) {</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"69\"></td>","                <td class=\"webkit-line-content\"> w.setTimeout(callback, 1000 / 60);</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"70\"></td>","                <td class=\"webkit-line-content\"> };</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"71\"></td>","                <td class=\"webkit-line-content\"> })();</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"72\"></td>","                <td class=\"webkit-line-content\"> </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"73\"></td>","                <td class=\"webkit-line-content\"> var ctx = document.getElementById('canvas').getContext('2d');</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"74\"></td>","                <td class=\"webkit-line-content\"> </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"75\"></td>","                <td class=\"webkit-line-content\"> </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"76\"></td>","                <td class=\"webkit-line-content\"> /*</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"77\"></td>","                <td class=\"webkit-line-content\"> * the main Quadtree</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"78\"></td>","                <td class=\"webkit-line-content\"> */</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"79\"></td>","                <td class=\"webkit-line-content\"> /*</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"80\"></td>","                <td class=\"webkit-line-content\"> var myTree = new Quadtree({</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"81\"></td>","                <td class=\"webkit-line-content\"> x: 0,</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"82\"></td>","                <td class=\"webkit-line-content\"> y: 0,</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"83\"></td>","                <td class=\"webkit-line-content\"> width: 400,</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"84\"></td>","                <td class=\"webkit-line-content\"> height: 300</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"85\"></td>","                <td class=\"webkit-line-content\"> });</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"86\"></td>","                <td class=\"webkit-line-content\"> */</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"87\"></td>","                <td class=\"webkit-line-content\"> var myTree;</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"88\"></td>","                <td class=\"webkit-line-content\"> </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"89\"></td>","                <td class=\"webkit-line-content\"> function initSpatialHash() {</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"90\"></td>","                <td class=\"webkit-line-content\"> myTree = new SpatialHash(config.sizePowerOfTwo);</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"91\"></td>","                <td class=\"webkit-line-content\"> }</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"92\"></td>","                <td class=\"webkit-line-content\"> </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"93\"></td>","                <td class=\"webkit-line-content\"> initSpatialHash();</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"94\"></td>","                <td class=\"webkit-line-content\"> </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"95\"></td>","                <td class=\"webkit-line-content\"> /*</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"96\"></td>","                <td class=\"webkit-line-content\"> * our objects will be stored here</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"97\"></td>","                <td class=\"webkit-line-content\"> */</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"98\"></td>","                <td class=\"webkit-line-content\"> var myObjects = [];</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"99\"></td>","                <td class=\"webkit-line-content\"> </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"100\"></td>","                <td class=\"webkit-line-content\"> /*</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"101\"></td>","                <td class=\"webkit-line-content\"> * our \"hero\"</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"102\"></td>","                <td class=\"webkit-line-content\"> */</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"103\"></td>","                <td class=\"webkit-line-content\"> var myHero = {</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"104\"></td>","                <td class=\"webkit-line-content\"> x : 0,</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"105\"></td>","                <td class=\"webkit-line-content\"> y : 0,</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"106\"></td>","                <td class=\"webkit-line-content\"> width : 20,</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"107\"></td>","                <td class=\"webkit-line-content\"> height : 20</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"108\"></td>","                <td class=\"webkit-line-content\"> };</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"109\"></td>","                <td class=\"webkit-line-content\"> </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"110\"></td>","                <td class=\"webkit-line-content\"> </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"111\"></td>","                <td class=\"webkit-line-content\"> /*</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"112\"></td>","                <td class=\"webkit-line-content\"> * create some objects and save them in myObjects</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"113\"></td>","                <td class=\"webkit-line-content\"> */</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"114\"></td>","                <td class=\"webkit-line-content\"> var createObjects = function() {</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"115\"></td>","                <td class=\"webkit-line-content\"> myObjects.length = 0;</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"116\"></td>","                <td class=\"webkit-line-content\"> for( var i=0;i&lt;config.numberOfObjects;i=i+1 ) {</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"117\"></td>","                <td class=\"webkit-line-content\"> myObjects.push({</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"118\"></td>","                <td class=\"webkit-line-content\"> x : randMinMax(10, 390),</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"119\"></td>","                <td class=\"webkit-line-content\"> y : randMinMax(10, 290),</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"120\"></td>","                <td class=\"webkit-line-content\"> width : randMinMax(10, 20),</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"121\"></td>","                <td class=\"webkit-line-content\"> height : randMinMax(10, 20),</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"122\"></td>","                <td class=\"webkit-line-content\"> vx: randMinMax(-1,1),</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"123\"></td>","                <td class=\"webkit-line-content\"> vy: randMinMax(-1,1),</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"124\"></td>","                <td class=\"webkit-line-content\"> check : false</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"125\"></td>","                <td class=\"webkit-line-content\"> });</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"126\"></td>","                <td class=\"webkit-line-content\"> }</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"127\"></td>","                <td class=\"webkit-line-content\"> };</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"128\"></td>","                <td class=\"webkit-line-content\"> </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"129\"></td>","                <td class=\"webkit-line-content\"> </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"130\"></td>","                <td class=\"webkit-line-content\"> /*</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"131\"></td>","                <td class=\"webkit-line-content\"> * draw Quadtree nodes</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"132\"></td>","                <td class=\"webkit-line-content\"> */</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"133\"></td>","                <td class=\"webkit-line-content\"> var drawQuadtree = function( node ) {</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"134\"></td>","                <td class=\"webkit-line-content\"> var bounds = node.bounds;</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"135\"></td>","                <td class=\"webkit-line-content\"> </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"136\"></td>","                <td class=\"webkit-line-content\"> //no subnodes? draw the current node</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"137\"></td>","                <td class=\"webkit-line-content\"> if( node.nodes.length === 0 ) {</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"138\"></td>","                <td class=\"webkit-line-content\"> ctx.strokeStyle = 'rgba(255,0,0,0.2)';</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"139\"></td>","                <td class=\"webkit-line-content\"> ctx.strokeRect(bounds.x, bounds.y, bounds.width, bounds.height);</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"140\"></td>","                <td class=\"webkit-line-content\"> </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"141\"></td>","                <td class=\"webkit-line-content\"> //has subnodes? drawQuadtree them!</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"142\"></td>","                <td class=\"webkit-line-content\"> } else {</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"143\"></td>","                <td class=\"webkit-line-content\"> for( var i=0;i&lt;node.nodes.length;i=i+1 ) {</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"144\"></td>","                <td class=\"webkit-line-content\"> drawQuadtree( node.nodes[ i ] );</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"145\"></td>","                <td class=\"webkit-line-content\"> }</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"146\"></td>","                <td class=\"webkit-line-content\"> }</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"147\"></td>","                <td class=\"webkit-line-content\"> };</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"148\"></td>","                <td class=\"webkit-line-content\"> </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"149\"></td>","                <td class=\"webkit-line-content\"> /*</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"150\"></td>","                <td class=\"webkit-line-content\"> * draw all objects in a given node </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"151\"></td>","                <td class=\"webkit-line-content\"> */</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"152\"></td>","                <td class=\"webkit-line-content\"> var drawObjects = function( node ) {</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"153\"></td>","                <td class=\"webkit-line-content\"> </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"154\"></td>","                <td class=\"webkit-line-content\"> /*</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"155\"></td>","                <td class=\"webkit-line-content\"> var obj;</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"156\"></td>","                <td class=\"webkit-line-content\"> */</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"157\"></td>","                <td class=\"webkit-line-content\"> var obj, objects = node.retrieve(); // get all</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"158\"></td>","                <td class=\"webkit-line-content\">","                    <br>","                </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"159\"></td>","                <td class=\"webkit-line-content\"> for( var i=0;i&lt;objects.length;i=i+1 ) {</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"160\"></td>","                <td class=\"webkit-line-content\"> </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"161\"></td>","                <td class=\"webkit-line-content\"> obj = objects[ i ];</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"162\"></td>","                <td class=\"webkit-line-content\"> </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"163\"></td>","                <td class=\"webkit-line-content\"> if( obj.check ) {</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"164\"></td>","                <td class=\"webkit-line-content\"> ctx.strokeStyle = 'rgba(255,255,255,0.9)';</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"165\"></td>","                <td class=\"webkit-line-content\"> } else {</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"166\"></td>","                <td class=\"webkit-line-content\"> ctx.strokeStyle = 'rgba(255,255,255,0.2)';</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"167\"></td>","                <td class=\"webkit-line-content\"> }</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"168\"></td>","                <td class=\"webkit-line-content\"> </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"169\"></td>","                <td class=\"webkit-line-content\"> ctx.strokeRect( obj.x, obj.y, obj.width, obj.height );</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"170\"></td>","                <td class=\"webkit-line-content\"> }</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"171\"></td>","                <td class=\"webkit-line-content\">","                    <br>","                </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"172\"></td>","                <td class=\"webkit-line-content\"> };</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"173\"></td>","                <td class=\"webkit-line-content\"> </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"174\"></td>","                <td class=\"webkit-line-content\"> /*</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"175\"></td>","                <td class=\"webkit-line-content\"> * position hero at mouse position</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"176\"></td>","                <td class=\"webkit-line-content\"> */</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"177\"></td>","                <td class=\"webkit-line-content\"> var handleMousemove = function(e) {</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"178\"></td>","                <td class=\"webkit-line-content\"> </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"179\"></td>","                <td class=\"webkit-line-content\"> var mx, my;</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"180\"></td>","                <td class=\"webkit-line-content\"> </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"181\"></td>","                <td class=\"webkit-line-content\"> if(e.offsetX) {</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"182\"></td>","                <td class=\"webkit-line-content\"> mx = e.offsetX;</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"183\"></td>","                <td class=\"webkit-line-content\"> my = e.offsetY;</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"184\"></td>","                <td class=\"webkit-line-content\"> } else if(e.layerX) {</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"185\"></td>","                <td class=\"webkit-line-content\"> mx = e.layerX;</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"186\"></td>","                <td class=\"webkit-line-content\"> my = e.layerY;</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"187\"></td>","                <td class=\"webkit-line-content\"> }</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"188\"></td>","                <td class=\"webkit-line-content\"> </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"189\"></td>","                <td class=\"webkit-line-content\"> myHero.x = mx;</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"190\"></td>","                <td class=\"webkit-line-content\"> myHero.y = my;</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"191\"></td>","                <td class=\"webkit-line-content\"> };</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"192\"></td>","                <td class=\"webkit-line-content\"> </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"193\"></td>","                <td class=\"webkit-line-content\"> /*</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"194\"></td>","                <td class=\"webkit-line-content\"> * return a random number between min and max</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"195\"></td>","                <td class=\"webkit-line-content\"> */</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"196\"></td>","                <td class=\"webkit-line-content\"> var randMinMax = function(min, max) {</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"197\"></td>","                <td class=\"webkit-line-content\"> return min + (M.random() * (max - min));</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"198\"></td>","                <td class=\"webkit-line-content\"> }; </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"199\"></td>","                <td class=\"webkit-line-content\"> </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"200\"></td>","                <td class=\"webkit-line-content\"> function updateDatGui() {</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"201\"></td>","                <td class=\"webkit-line-content\"> if (lastConfig.numberOfObjects !== config.numberOfObjects) {</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"202\"></td>","                <td class=\"webkit-line-content\"> createObjects();</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"203\"></td>","                <td class=\"webkit-line-content\"> }</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"204\"></td>","                <td class=\"webkit-line-content\">","                    <br>","                </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"205\"></td>","                <td class=\"webkit-line-content\"> if (lastConfig.sizePowerOfTwo !== config.sizePowerOfTwo) {</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"206\"></td>","                <td class=\"webkit-line-content\"> initSpatialHash();</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"207\"></td>","                <td class=\"webkit-line-content\"> }</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"208\"></td>","                <td class=\"webkit-line-content\"> </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"209\"></td>","                <td class=\"webkit-line-content\"> saveLastConfig();</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"210\"></td>","                <td class=\"webkit-line-content\"> } </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"211\"></td>","                <td class=\"webkit-line-content\"> </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"212\"></td>","                <td class=\"webkit-line-content\"> /*</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"213\"></td>","                <td class=\"webkit-line-content\"> * our main loop</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"214\"></td>","                <td class=\"webkit-line-content\"> */</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"215\"></td>","                <td class=\"webkit-line-content\"> var loop = function() {</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"216\"></td>","                <td class=\"webkit-line-content\"> updateDatGui();</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"217\"></td>","                <td class=\"webkit-line-content\"> </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"218\"></td>","                <td class=\"webkit-line-content\"> var returnObjects = [];</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"219\"></td>","                <td class=\"webkit-line-content\"> </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"220\"></td>","                <td class=\"webkit-line-content\"> //clear the tree</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"221\"></td>","                <td class=\"webkit-line-content\"> myTree.clear();</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"222\"></td>","                <td class=\"webkit-line-content\"> ctx.clearRect(0, 0, 400, 300);</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"223\"></td>","                <td class=\"webkit-line-content\"> </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"224\"></td>","                <td class=\"webkit-line-content\"> //update myObjects and insert them into the tree again</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"225\"></td>","                <td class=\"webkit-line-content\"> for( var i=0;i&lt;myObjects.length;i=i+1 ) {</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"226\"></td>","                <td class=\"webkit-line-content\"> </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"227\"></td>","                <td class=\"webkit-line-content\"> myObjects[i].x += myObjects[i].vx;</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"228\"></td>","                <td class=\"webkit-line-content\"> myObjects[i].y += myObjects[i].vy;</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"229\"></td>","                <td class=\"webkit-line-content\"> myObjects[i].check = false;</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"230\"></td>","                <td class=\"webkit-line-content\"> </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"231\"></td>","                <td class=\"webkit-line-content\"> if( myObjects[i].x &gt; 400 ) myObjects[i].x = 0;</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"232\"></td>","                <td class=\"webkit-line-content\"> if( myObjects[i].x &lt; 0 ) myObjects[i].x = 400;</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"233\"></td>","                <td class=\"webkit-line-content\"> if( myObjects[i].y &gt; 300 ) myObjects[i].y = 0;</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"234\"></td>","                <td class=\"webkit-line-content\"> if( myObjects[i].y &lt; 0 ) myObjects[i].y = 300;</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"235\"></td>","                <td class=\"webkit-line-content\"> </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"236\"></td>","                <td class=\"webkit-line-content\"> </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"237\"></td>","                <td class=\"webkit-line-content\"> myTree.insert( myObjects[i] );</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"238\"></td>","                <td class=\"webkit-line-content\"> }</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"239\"></td>","                <td class=\"webkit-line-content\"> </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"240\"></td>","                <td class=\"webkit-line-content\"> //draw hero</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"241\"></td>","                <td class=\"webkit-line-content\"> ctx.strokeStyle = 'rgba(0,255,0,0.5)';</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"242\"></td>","                <td class=\"webkit-line-content\"> ctx.strokeRect( myHero.x, myHero.y, myHero.width, myHero.height );</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"243\"></td>","                <td class=\"webkit-line-content\"> </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"244\"></td>","                <td class=\"webkit-line-content\"> //retrieve all objects in the bounds of the hero </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"245\"></td>","                <td class=\"webkit-line-content\"> returnObjects = myTree.retrieve( myHero );</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"246\"></td>","                <td class=\"webkit-line-content\"> </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"247\"></td>","                <td class=\"webkit-line-content\"> //flag retrieved objects</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"248\"></td>","                <td class=\"webkit-line-content\"> for( i=0;i&lt;returnObjects.length;i=i+1 ) {</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"249\"></td>","                <td class=\"webkit-line-content\"> returnObjects[ i ].check = true;</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"250\"></td>","                <td class=\"webkit-line-content\"> }</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"251\"></td>","                <td class=\"webkit-line-content\"> </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"252\"></td>","                <td class=\"webkit-line-content\"> </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"253\"></td>","                <td class=\"webkit-line-content\"> /*</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"254\"></td>","                <td class=\"webkit-line-content\"> drawQuadtree( myTree );</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"255\"></td>","                <td class=\"webkit-line-content\"> */</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"256\"></td>","                <td class=\"webkit-line-content\"> drawObjects( myTree );</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"257\"></td>","                <td class=\"webkit-line-content\"> </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"258\"></td>","                <td class=\"webkit-line-content\"> requestAnimFrame( loop );</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"259\"></td>","                <td class=\"webkit-line-content\"> };</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"260\"></td>","                <td class=\"webkit-line-content\"> </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"261\"></td>","                <td class=\"webkit-line-content\"> //create objects</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"262\"></td>","                <td class=\"webkit-line-content\"> createObjects();</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"263\"></td>","                <td class=\"webkit-line-content\"> </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"264\"></td>","                <td class=\"webkit-line-content\"> //init first loop</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"265\"></td>","                <td class=\"webkit-line-content\"> loop();</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"266\"></td>","                <td class=\"webkit-line-content\"> </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"267\"></td>","                <td class=\"webkit-line-content\"> //set eventListener for mousemove</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"268\"></td>","                <td class=\"webkit-line-content\"> document.getElementById('canvas').addEventListener('mousemove', handleMousemove);</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"269\"></td>","                <td class=\"webkit-line-content\"> </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"270\"></td>","                <td class=\"webkit-line-content\"> //make myTree available in global namespace</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"271\"></td>","                <td class=\"webkit-line-content\"> w.myTree = myTree;</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"272\"></td>","                <td class=\"webkit-line-content\"> </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"273\"></td>","                <td class=\"webkit-line-content\"> })(window, Math);</td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"274\"></td>","                <td class=\"webkit-line-content\"> <span class=\"webkit-html-tag\">&lt;/script&gt;</span>","                </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"275\"></td>","                <td class=\"webkit-line-content\"> <span class=\"webkit-html-tag\">&lt;/body&gt;</span>","                </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"276\"></td>","                <td class=\"webkit-line-content\"><span class=\"webkit-html-tag\">&lt;/html&gt;</span>","                </td>","            </tr>","            <tr>","                <td class=\"webkit-line-number\" value=\"277\"></td>","                <td class=\"webkit-line-content\"><span class=\"webkit-html-end-of-file\"></span>","                </td>","            </tr>","        </tbody>","    </table>","</body>","",""]}]]},"ace":{"folds":[],"scrolltop":15890.090708732605,"scrollleft":0,"selection":{"start":{"row":5,"column":0},"end":{"row":5,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1432839991975,"hash":"3406cb77e592e191689a5dbe98989fd32e24d179"}